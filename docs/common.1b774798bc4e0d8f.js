"use strict";(self.webpackChunkfacao_control=self.webpackChunkfacao_control||[]).push([[592],{1857:(d,D,n)=>{n.d(D,{i:()=>v});var l=n(529),g=n(262),a=n(515),c=n(4004),u=n(2340),E=n(4650),_=n(6280),f=n(1622);const p=u.N.API_ENV;let v=(()=>{class r{constructor(o,h,t){this._httpClient=o,this._userService=h,this._tokenService=t}getMotivos(o){const h=this.getToken();return o?this._httpClient.get(`${p}/api/faccaocontrol/atraso/local/${o}`,{headers:h}).pipe((0,g.K)(t=>(401==t.status&&this.missingToken(),a.E))):this._httpClient.get(`${p}/api/faccaocontrol/atraso/all`,{headers:h}).pipe((0,g.K)(t=>(401==t.status&&this.missingToken(),a.E)))}logMotivos(o,h){const t=this.getToken();return o&&h?this._httpClient.get(`${p}/api/faccaocontrol/atraso/log/${o}/${h}`,{headers:t}).pipe((0,c.U)(e=>{const s=JSON.parse(e.data);return s.length>0?s:null}),(0,g.K)(e=>(401==e.status&&this.missingToken(),a.E))):this._httpClient.get(`${p}/api/faccaocontrol/atraso/log`,{headers:t}).pipe((0,c.U)(e=>{const s=JSON.parse(e.data);return s.length>0?s:null}),(0,g.K)(e=>(401==e.status&&this.missingToken(),a.E)))}setMotivo(o){const h=this.getToken(),t=JSON.stringify(o);return this._httpClient.post(`${p}/api/faccaocontrol/atraso/add`,t,{headers:h}).pipe((0,c.U)(e=>"ok"==e?1:0))}removeMotivo(o){const h=JSON.stringify(o),t=this.getToken();return this._httpClient.post(`${p}/api/faccaocontrol/atraso/remove`,h,{headers:t}).pipe((0,c.U)(e=>"ok"==e?1:0))}getToken(){const o=this._tokenService.getToken();return(new l.WM).append("x-access-token",o)}missingToken(){alert("Sess\xe3o expirada!"),this._userService.logout()}}return r.\u0275fac=function(o){return new(o||r)(E.LFG(l.eN),E.LFG(_.K),E.LFG(f.B))},r.\u0275prov=E.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},2318:(d,D,n)=>{n.d(D,{W:()=>O});var l=n(529),g=n(1135),a=n(262),c=n(515),u=n(8505),E=n(2340),_=n(4650),f=n(6280),p=n(1622),v=n(2410);const r=E.N.API_ENV;let O=(()=>{class o{constructor(t,e,s,i){this._httpClient=t,this._userService=e,this._tokenService=s,this._cryptoService=i,this.opsData$=new g.X(this.opsData)}getAllOPs(){const t=this.getToken();return this._httpClient.get(`${r}/api/faccaocontrol/op/all`,{headers:t}).pipe((0,u.b)(e=>{this.opsData$.next(e),this.setSessionData()}),(0,a.K)(e=>(401==e.status&&this.missingToken(),c.E)))}getOPsRegiao(){const t=this.getToken();let s=this._userService.getSession().regiao;return"99999"==s?this._httpClient.get(`${r}/api/faccaocontrol/op/all`,{headers:t}).pipe((0,u.b)(i=>{this.opsData$.next(i),this.setSessionData()}),(0,a.K)(i=>(401==i.status&&this.missingToken(),c.E))):this._httpClient.get(`${r}/api/faccaocontrol/op/regiao/${s}`,{headers:t}).pipe((0,u.b)(i=>{this.opsData$.next(i),this.setSessionData()}),(0,a.K)(i=>(401==i.status&&this.missingToken(),c.E)))}getAllOPsResumido(){const t=this.getToken();return this._httpClient.get(`${r}/api/faccaocontrol/op/resumido/all`,{headers:t}).pipe((0,u.b)(e=>{this.opsData$.next(e),this.setSessionData()}),(0,a.K)(e=>(401==e.status&&this.missingToken(),c.E)))}getOpById(t,e){const s=this.getToken();return e?this._httpClient.get(`${r}/api/faccaocontrol/op/id/${t+"-"+e}`,{headers:s}).pipe((0,a.K)(i=>(401==i.status&&this.missingToken(),c.E))):this._httpClient.get(`${r}/api/faccaocontrol/op/id/${t}`,{headers:s}).pipe((0,a.K)(i=>(401==i.status&&this.missingToken(),c.E)))}getOpByLocal(t){const e=this.getToken();return this._httpClient.get(`${r}/api/faccaocontrol/op/local/${t}`,{headers:e}).pipe((0,a.K)(s=>(401==s.status&&this.missingToken(),c.E)))}getOpByStatus(t,e){const s=this.getToken();return e?this._httpClient.get(`${r}/api/faccaocontrol/op/status/${t}/${e}`,{headers:s}).pipe((0,a.K)(i=>(401==i.status&&this.missingToken(),c.E))):this._httpClient.get(`${r}/api/faccaocontrol/op/status/${t}`,{headers:s}).pipe((0,a.K)(i=>(401==i.status&&this.missingToken(),c.E)))}getLocalFaccao(t){const e=this.getToken();return t?this._httpClient.get(`${r}/api/faccaocontrol/local/${t}`,{headers:e}).pipe((0,a.K)(s=>(401==s.status&&this.missingToken(),c.E))):this._httpClient.get(`${r}/api/faccaocontrol/local/all`,{headers:e}).pipe((0,a.K)(s=>(401==s.status&&this.missingToken(),c.E)))}getOPsData(){return this.opsData$.asObservable()}setSessionData(){this.getOPsData().subscribe(t=>{const e=this._cryptoService.msgCrypto(JSON.stringify(t));sessionStorage.setItem("data",e),sessionStorage.setItem("data-time",Date.now().toString())})}getSessionData(){const t=sessionStorage.getItem("data"),e=t?this._cryptoService.msgDecrypto(t):null;return e&&this.isDataSessionOk()?JSON.parse(e):(sessionStorage.removeItem("data"),sessionStorage.removeItem("data-time"),[])}getToken(){const t=this._tokenService.getToken();return t?(new l.WM).append("x-access-token",t):new l.WM}missingToken(){alert("Sess\xe3o expirada!"),this._userService.logout()}isDataSessionOk(){const t=parseInt(sessionStorage.getItem("data-time")||"0");let e=Date.now()-t;if(e>9e5)return!1;if(e>9e4){const s=new Date(t).getHours(),i=new Date(t).getMinutes();if(s<(new Date).getHours()||i<=6)return!1}return!0}}return o.\u0275fac=function(t){return new(t||o)(_.LFG(l.eN),_.LFG(f.K),_.LFG(p.B),_.LFG(v.$))},o.\u0275prov=_.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()}}]);