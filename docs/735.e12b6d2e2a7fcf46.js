"use strict";(self.webpackChunkfacao_control=self.webpackChunkfacao_control||[]).push([[735],{7735:(rn,q,u)=>{u.r(q),u.d(q,{AuditorModule:()=>an});var z=u(8605),g=u(6895),h=u(4006),b=u(9132),r=u(90),w=u(470),t=u(4650);let ft=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({}),n})();var Ot=u(7730),f=u(1135),Ct=u(4128),Pt=u(9300),bt=u(4004),v=u(9603),T=u(1433),vt=u(2087);function At(n,s){1&n&&t._UZ(0,"img",8),2&n&&t.Q6J("src",s.$implicit,t.LSH)}function xt(n,s){if(1&n&&(t.TgZ(0,"div")(1,"swiper",2)(2,"div",3),t.YNc(3,At,1,1,"img",4),t.qZA(),t._UZ(4,"div",5)(5,"div",6)(6,"div",7),t.qZA()()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("config",e.config),t.xp6(2),t.Q6J("ngForOf",e.list)}}function Tt(n,s){1&n&&(t.TgZ(0,"span"),t._uU(1,"Nenhuma imagem dispon\xedvel"),t.qZA())}let Mt=(()=>{class n{constructor(){this.err=!1,this.list=[],this.nImgs=0,this.config={pagination:{el:".swiper-pagination",clickable:!1},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},loop:!1,preloadImages:!0,spaceBetween:30}}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["fc-carossel"]],inputs:{list:"list"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["error",""],[2,"height","400px","width","275px",3,"config"],[1,"swiper-wrapper"],["class","swiper-slide","alt","op-pe\xe7a","height","auto","width","auto","onError","this.style.display='none'",3,"src",4,"ngFor","ngForOf"],[1,"swiper-pagination"],[1,"swiper-button-next"],[1,"swiper-button-prev"],["alt","op-pe\xe7a","height","auto","width","auto","onError","this.style.display='none'",1,"swiper-slide",3,"src"]],template:function(e,i){if(1&e&&(t.YNc(0,xt,7,2,"div",0),t.YNc(1,Tt,2,0,"ng-template",null,1,t.W1O)),2&e){const o=t.MAs(2);t.Q6J("ngIf",i.list.length>0)("ngIfElse",o)}},dependencies:[g.sg,g.O5,vt.n],styles:[".swiper-slide[_ngcontent-%COMP%]{border-radius:5px}img[_ngcontent-%COMP%]{object-fit:cover}"]}),n})();var Y=u(515),N=u(1857),U=u(8678);function St(n,s){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"date"),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"date"),t.qZA()()),2&n){const e=s.$implicit,i=t.oxw(3);t.xp6(2),t.Oqu(e.motivoAnterior||"-"),t.xp6(2),t.Oqu(t.xi3(5,6,+e.dtOriginal+i.MAIS_3_HORAS_MILISSEGUNDOS,"dd/MM/yyyy")),t.xp6(3),t.Oqu(e.novoMotivo),t.xp6(2),t.Oqu(t.Dn7(10,9,+e.novaPrevisao+i.MAIS_3_HORAS_MILISSEGUNDOS,"dd/MM/yyyy","pt-Br")),t.xp6(3),t.Oqu(e.usuario),t.xp6(2),t.Oqu(t.Dn7(15,13,+e.dtInserido+i.MAIS_3_HORAS_MILISSEGUNDOS,"dd/MM/yyyy HH:mm:ss","pt-Br"))}}function wt(n,s){if(1&n&&(t.TgZ(0,"table",4)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Motivo Anterior"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Data Original"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Novo Motivo"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Nova Previs\xe3o"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Usu\xe1rio"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Data Inserido"),t.qZA()()(),t.TgZ(15,"tbody"),t.YNc(16,St,16,17,"tr",5),t.ALo(17,"async"),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(16),t.Q6J("ngForOf",t.lcZ(17,1,e.logAlteracoes$))}}function Dt(n,s){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"date"),t.qZA()()),2&n){const e=s.$implicit,i=t.oxw(3);t.xp6(2),t.Oqu(e.apontamentoAnterior||"-"),t.xp6(2),t.Oqu(e.apontamentoNovo),t.xp6(2),t.Oqu(+e.diasNoApontamento<=-1?0:e.diasNoApontamento),t.xp6(2),t.Oqu(e.usuario),t.xp6(2),t.Oqu(t.Dn7(11,5,+e.dtInserido+i.MAIS_3_HORAS_MILISSEGUNDOS,"dd/MM/yyyy HH:mm:ss","pt-Br"))}}function Zt(n,s){if(1&n&&(t.TgZ(0,"table",4)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Apontamento Anterior"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Apontamento Novo"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Dias no Apontamento"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Usu\xe1rio"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Data Inserido"),t.qZA()()(),t.TgZ(13,"tbody"),t.YNc(14,Dt,12,9,"tr",5),t.ALo(15,"async"),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(14),t.Q6J("ngForOf",t.lcZ(15,1,e.logApontamentos$))}}function Et(n,s){if(1&n&&(t.ynx(0),t.YNc(1,wt,18,3,"table",3),t.YNc(2,Zt,16,3,"table",3),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.isAtraso),t.xp6(1),t.Q6J("ngIf",e.isApontamento)}}function It(n,s){1&n&&(t.TgZ(0,"h5"),t._uU(1,"Nenhuma altera\xe7\xe3o registrada!"),t.qZA())}let yt=(()=>{class n{constructor(e,i,o){this.dialogRef=e,this._atrasoService=i,this._apontamentoService=o,this.datePipe=new g.uU("pt-Br"),this.MAIS_3_HORAS_MILISSEGUNDOS=108e5,this.isAtraso=!1,this.isApontamento=!1,this.tipo=""}ngOnInit(){console.log(this.tipo,this.prevOP.cd_local.toString(),this.prevOP.NR_REDUZIDOOP.toString()),this.isAtraso="Hist\xf3rico Previs\xe3o"==this.tipo,this.isApontamento="Hist\xf3rico Apontamento"==this.tipo,this.isAtraso?this.logAlteracoes$=this._atrasoService.logMotivos(this.prevOP.cd_local.toString(),this.prevOP.NR_REDUZIDOOP.toString()):this.isApontamento&&(this.logApontamentos$=this._apontamentoService.logApontamento(this.prevOP.cd_local.toString(),this.prevOP.NR_REDUZIDOOP.toString()))}cancel(){this.logAlteracoes$=Y.E,this.logApontamentos$=Y.E,this.dialogRef.close({})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(r.X4l),t.Y36(N.i),t.Y36(U.y))},n.\u0275cmp=t.Xpm({type:n,selectors:[["fc-dialog-hist"]],inputs:{prevOP:"prevOP",tipo:"tipo"},decls:12,vars:6,consts:[[1,"bt-fechar",3,"click"],[4,"ngIf","ngIfElse"],["vazio",""],["class","row-border hover",4,"ngIf"],[1,"row-border","hover"],[4,"ngFor","ngForOf"]],template:function(e,i){if(1&e&&(t.TgZ(0,"nb-card")(1,"nb-card-header")(2,"h4"),t._uU(3,"Hist\xf3rico de Altera\xe7\xf5es"),t.qZA(),t.TgZ(4,"div",0),t.NdJ("click",function(){return i.cancel()}),t._uU(5,"x"),t.qZA()(),t.TgZ(6,"nb-card-body"),t.YNc(7,Et,3,2,"ng-container",1),t.ALo(8,"async"),t.ALo(9,"async"),t.YNc(10,It,2,0,"ng-template",null,2,t.W1O),t.qZA()()),2&e){const o=t.MAs(11);t.xp6(7),t.Q6J("ngIf",t.lcZ(8,2,i.logAlteracoes$)||t.lcZ(9,4,i.logApontamentos$))("ngIfElse",o)}},dependencies:[g.sg,g.O5,r.Asz,r.yKW,r.ndF,g.Ov,g.uU],styles:["nb-card[_ngcontent-%COMP%]{max-height:362px;position:relative}nb-card-header[_ngcontent-%COMP%]{padding:1em 3em 0}.bt-fechar[_ngcontent-%COMP%]{position:absolute;top:0;right:0;padding:5px 1em 0 0;cursor:pointer}table[_ngcontent-%COMP%]{width:100%;text-align:center;border:1px solid var(--color-tb-even-bg)}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:var(--color-tb-header-bg);height:32px;font-size:.8em}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.7em;padding:3px;border:1px solid var(--color-tb-even-bg)}table[_ngcontent-%COMP%]   .even[_ngcontent-%COMP%]{background-color:var(--color-tb-even-bg)}h5[_ngcontent-%COMP%]{text-align:center}@media screen and (max-width: 768px){nb-card-header[_ngcontent-%COMP%]{padding:8px 8px 0}nb-card-body[_ngcontent-%COMP%]{overflow:auto;padding:3px 5px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{height:auto}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:3px;line-height:1.5}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{line-height:1.5}}@media screen and (max-width: 360px){nb-card-body[_ngcontent-%COMP%]{max-width:320px}}"]}),n})();var D=(()=>{return(n=D||(D={})).alterado_sequencia_producao="Alterado sequencia de produ\xe7\xe3o",n.atraso_aviamento="Atraso de aviamento",n.atraso_faccao="Atraso da fac\xe7\xe3o",n.complexidade_alta="Complexidade alta",n.conserto="Conserto",n.modelagem="Modelagem",n.reposicao_corte="Reposi\xe7\xe3o de corte",n.reprovado_inspecao="Reprovado na inspe\xe7\xe3o",n.sacrificio="Sacrif\xedcio",D;var n})(),Z=(()=>{return(n=Z||(Z={}))[n["Alterado sequencia de produ\xe7\xe3o"]=0]="Alterado sequencia de produ\xe7\xe3o",n[n["Atraso de aviamento"]=1]="Atraso de aviamento",n[n["Atraso da fac\xe7\xe3o"]=2]="Atraso da fac\xe7\xe3o",n[n["Complexidade alta"]=3]="Complexidade alta",n[n.Conserto=4]="Conserto",n[n.Modelagem=5]="Modelagem",n[n["Reposi\xe7\xe3o de corte"]=6]="Reposi\xe7\xe3o de corte",n[n["Reprovado na inspe\xe7\xe3o"]=7]="Reprovado na inspe\xe7\xe3o",n[n.Sacrif\u00edcio=8]="Sacrif\xedcio",n[n.Adiantamento=9]="Adiantamento",n[n.Removido=10]="Removido",Z;var n})(),E=(()=>{return(n=E||(E={}))[n.Despriorizado=0]="Despriorizado",n[n.Remanejamento=1]="Remanejamento",n[n["Resolu\xe7\xe3o de pend\xeancia"]=2]="Resolu\xe7\xe3o de pend\xeancia",n[n["Resolu\xe7\xe3o de nota"]=3]="Resolu\xe7\xe3o de nota",n[n.Inconsist\u00eancia=4]="Inconsist\xeancia",E;var n})(),M=u(6280);function Lt(n,s){if(1&n&&(t.TgZ(0,"div")(1,"h3"),t._uU(2),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.hij("Nova previs\xe3o de ",e.tipo,"")}}function Nt(n,s){if(1&n&&(t.TgZ(0,"h3"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.tipo)}}function Ut(n,s){if(1&n&&(t.TgZ(0,"nb-option",18),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",s.index),t.xp6(1),t.hij("",e.value," ")}}function qt(n,s){if(1&n&&(t.TgZ(0,"nb-select",15)(1,"nb-option",16),t._uU(2,"Selecionar"),t.qZA(),t.YNc(3,Ut,2,2,"nb-option",17),t.ALo(4,"keyvalue"),t.qZA()),2&n){const e=t.oxw(2);t.xp6(3),t.Q6J("ngForOf",t.lcZ(4,1,e.motivosAtraso))}}function Ft(n,s){if(1&n&&(t.TgZ(0,"div",10),t._UZ(1,"input",11)(2,"nb-datepicker",12,13)(4,"br"),t.YNc(5,qt,5,3,"nb-select",14),t.qZA()),2&n){const e=t.MAs(3),i=t.oxw();t.xp6(1),t.Q6J("nbDatepicker",e)("value",i.prev),t.xp6(1),t.Q6J("min",i.min)("max",i.max),t.xp6(3),t.Q6J("ngIf","Atraso"==i.tipo)}}function Rt(n,s){if(1&n&&(t.TgZ(0,"nb-option",18),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",s.index),t.xp6(1),t.Oqu(e)}}function kt(n,s){if(1&n&&(t.TgZ(0,"nb-option",18),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",s.index),t.xp6(1),t.Oqu(e.value)}}function Jt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",21)(1,"nb-select",22),t.NdJ("selectedChange",function(o){t.CHM(e);const a=t.oxw(2);return t.KtG(a.selectedParado=o)}),t.YNc(2,kt,2,2,"nb-option",17),t.ALo(3,"keyvalue"),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("selected",e.selectedParado),t.xp6(1),t.Q6J("ngForOf",t.lcZ(3,2,e.paradoList))}}function Qt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",10)(1,"nb-select",19),t.NdJ("selectedChange",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.selected=o)}),t.TgZ(2,"nb-option",16),t._uU(3,"Selecionar"),t.qZA(),t.YNc(4,Rt,2,2,"nb-option",17),t.qZA(),t.YNc(5,Jt,4,4,"div",20),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("selected",e.selected),t.xp6(3),t.Q6J("ngForOf",e.DS_APONTAMENTO_DSList),t.xp6(1),t.Q6J("ngIf","04 - Parado"==e.DS_APONTAMENTO_DSList[e.selected])}}function Yt(n,s){1&n&&(t.TgZ(0,"div",23)(1,"span",24),t._uU(2,"Data inserida incorreta ou campos em branco!"),t.qZA()())}function Ht(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",25)(1,"span",26),t._uU(2),t.TgZ(3,"div",27)(4,"nb-icon",28),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.remove())}),t.qZA()()(),t.TgZ(5,"span",29),t._uU(6),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.hij("\xdaltima data inserida: ",e.prev," "),t.xp6(4),t.hij("Motivo inserido: ",e.i_motivo,"")}}let $t=(()=>{class n{constructor(e,i,o,a){this.dialogRef=e,this._userService=i,this._atrasoService=o,this._apontamentoService=a,this.datePipeBr=new g.uU("pt-Br"),this.min=new Date((new Date).setHours(-1)),this.max=new Date((new Date).setFullYear((new Date).getFullYear()+1)),this.loading=!1,this.latitude=0,this.longitude=0,this.user="",this.cd_user=0,this.motivosAtraso=D,this.DS_APONTAMENTO_DSList=[],this.paradoList=Object.values(E).filter(c=>"string"==typeof c),this.err=!1,this.prev=this.min.toLocaleString("pt-Br").substring(10),this.i_motivo="",this.tipo="",this.DS_APONTAMENTO_DS="",this.selectedParado=-1,this.apontamento=!1,this.dialogForm=new h.nJ({motivoControl:new h.p4,dtControl:new h.NI(""),DS_APONTAMENTO_DSControl:new h.p4,motivoParadoControl:new h.p4}),this.removed=!1}ngOnInit(){this.user=this._userService.getSession().nome,this.cd_user=this._userService.getSession().CD_USUARIO;let e=document.getElementById("dateInput");e?.blur(),e?.setAttribute("readonly","readonly");let i=this.prevOP.previsao.split("/").reverse();if("Adiantamento"!=this.tipo){i[2]=+i[2]+1+"";let a=new Date(i.join("-"));this.min=a>this.min?a:this.min}else{i[2]=+i[2]+"";let a=new Date(i.join("-"));this.max=a<this.max?a:this.max}let o=Object.values(v.O).filter(a=>"string"==typeof a);for(let[a,c]of o.entries())"Em transporte"!=v.O[a]&&"N\xe3o informado"!=v.O[a]&&"Coletado"!=v.O[a]&&this.DS_APONTAMENTO_DSList.push((a<10?"0"+a+" - ":a+" - ")+c);this.loading=!1,navigator.geolocation&&navigator.geolocation.getCurrentPosition(a=>{this.latitude=a.coords.latitude,this.longitude=a.coords.longitude},a=>console.error(`ERROR(${a.code}) ${a.message}`),{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})}remove(){this.loading=!0,this.prev="",this.removed=!0,this.i_motivo="";let e=(new Date).toLocaleString("pt-Br"),i=e.split(" ");e=i[0].split("/").reverse().join("-")+" "+i[1],this.novoMotivo={NR_REDUZIDOOP:this.prevOP.NR_REDUZIDOOP,CD_LOCAL:this.prevOP.cd_local,DT_PREV_RETORNO:this.prevOP.previsao,DT_PREV_RETORNO_NOVA:"",QT_OP:this.prevOP.qnt,Status:this.prevOP.status,DS_APONTAMENTO_DS:"",NOVA_PREVISAO:"",CD_ATRASO:this.prevOP.CD_ATRASO,CD_ATRASO_DS:0,DS_ATRASO_DS:this.prevOP.motivo_atraso,CD_USUARIO:this.cd_user,DS_USUARIO:this.user,DT_INSERIDO:e,GEOLOCALIZACAO:this.latitude+", "+this.longitude},this._atrasoService.removeMotivo(this.novoMotivo),this._atrasoService.removeMotivo(this.novoMotivo).subscribe({next:o=>{this.dialogRef.close({prev:"",motivo:this.i_motivo,removed:this.removed})},error:o=>{alert(`ERROR(${o.code}) ${o.message}`)}})}cancel(){this.loading=!0,this.dialogRef.close({prev:this.prev,motivo:this.i_motivo,removed:this.removed,DS_APONTAMENTO_DS:this.DS_APONTAMENTO_DS})}submit(){let e=this.dialogForm.value;if(this.apontamento)return void this.submitApontamento();let i=new Date(e.dtControl);if(i.getTime()+828e5<(new Date).getTime()||i.getTime()+828e5>(new Date).getTime()+31536e6)return this.err=!0,void(this.loading=!1);let o="",a="";o=e.dtControl?i.toLocaleString("pt-Br").substring(0,10):this.prev;let c=e.motivoControl;a="Adiantamento"==this.tipo?this.tipo:Object.values(this.motivosAtraso)[c];let _=(new Date).toLocaleString("pt-Br").split(" "),d=_[0].split("/").reverse().join("-")+" "+_[1],p=this.prevOP.previsao.split("/").reverse().join("-");o=o.split("/").reverse().join("-"),this.novoMotivo={CD_ATRASO:this.prevOP.CD_ATRASO?this.prevOP.CD_ATRASO:0,NR_REDUZIDOOP:this.prevOP.NR_REDUZIDOOP,CD_LOCAL:this.prevOP.cd_local,DT_PREV_RETORNO:p,DT_PREV_RETORNO_NOVA:"",QT_OP:this.prevOP.qnt,Status:this.prevOP.status,NOVA_PREVISAO:o,CD_ATRASO_DS:Z[a]+1,DS_ATRASO_DS:a,CD_USUARIO:this.cd_user,DT_INSERIDO:d,GEOLOCALIZACAO:this.latitude+", "+this.longitude},"Adiantamento"==this.tipo||this.novoMotivo.DS_ATRASO_DS&&this.novoMotivo.NOVA_PREVISAO?(this.loading=!0,this._atrasoService.setMotivo(this.novoMotivo).subscribe({next:l=>{this.dialogRef.close({prev:o.split("/").reverse().join("-"),motivo:this.novoMotivo.DS_ATRASO_DS,removed:this.removed})},error:l=>{alert(`ERROR(${l.code}) ${l.message}`),this.err=!0,this.loading=!1}})):(this.err=!0,this.loading=!1)}submitApontamento(){this.err=!1;let e=this.dialogForm.value,o=this.DS_APONTAMENTO_DSList[e.DS_APONTAMENTO_DSControl],c=this.paradoList[e.motivoParadoControl];o=o.split(" - ")[1];let _=c?" - "+c:"";o=o.includes("Parado")?o+_:o;let d=(new Date).toLocaleString("pt-Br").split(" "),p=d[0].split("/").reverse().join("-")+" "+d[1];this.novoApontamento={NR_REDUZIDOOP:this.prevOP.NR_REDUZIDOOP,CD_LOCAL:this.prevOP.cd_local,DT_PREVRETORNO:this.prevOP.previsao,QT_OP:this.prevOP.qnt,Status:this.prevOP.status,CD_APONTAMENTO_DS:v.R[o]+1,DS_APONTAMENTO_DS:o,CD_USUARIO:this.cd_user,USUARIO:this.user,DT_MODIFICACAO:p,GEOLOCALIZACAO:this.latitude+", "+this.longitude},o.match("Parado")&&this.selectedParado<0&&(this.err=!0,this.loading=!1),o&&!this.err?(this.loading=!0,this._apontamentoService.setApontamento(this.novoApontamento).subscribe({next:l=>{this.dialogRef.close({removed:this.removed,DS_APONTAMENTO_DS:this.novoApontamento.DS_APONTAMENTO_DS})},error:l=>{alert(`ERROR(${l.code}) ${l.message}`),this.err=!0,this.loading=!1}})):(this.err=!0,this.loading=!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(r.X4l),t.Y36(M.K),t.Y36(N.i),t.Y36(U.y))},n.\u0275cmp=t.Xpm({type:n,selectors:[["fc-dialog"]],inputs:{prevOP:"prevOP",prev:"prev",i_motivo:"i_motivo",tipo:"tipo",DS_APONTAMENTO_DS:"DS_APONTAMENTO_DS"},decls:17,vars:8,consts:[[3,"nbSpinner"],[4,"ngIf","ngIfElse"],["apontamentoHeader",""],[3,"formGroup"],["class","body-wrapper",4,"ngIf","ngIfElse"],["apontamentoBody",""],["style","text-align: center;",4,"ngIf"],["class","data-inserida-wrapper",4,"ngIf"],["nbButton","","status","danger",3,"click"],["nbButton","","status","success",3,"click"],[1,"body-wrapper"],["inputmode","none","autocomplete","off","nbInput","","formControlName","dtControl","id","dateInput","placeholder","Nova data",2,"text-align","center",3,"nbDatepicker","value"],["format","dd/MM/yyyy",3,"min","max"],["datepicker",""],["placeholder","Motivo da altera\xe7\xe3o","formControlName","motivoControl",4,"ngIf"],["placeholder","Motivo da altera\xe7\xe3o","formControlName","motivoControl"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["placeholder","Apontamento","formControlName","DS_APONTAMENTO_DSControl",3,"selected","selectedChange"],["class","motivo-parado",4,"ngIf"],[1,"motivo-parado"],["placeholder","Apontamento","formControlName","motivoParadoControl",3,"selected","selectedChange"],[2,"text-align","center"],[2,"color","red","font-size","9px"],[1,"data-inserida-wrapper"],[1,"data-inserida"],[1,"bt-remover"],["icon","close-square-outline",3,"click"],[2,"font-size","12px"]],template:function(e,i){if(1&e&&(t.TgZ(0,"nb-card",0)(1,"nb-card-header"),t.YNc(2,Lt,3,1,"div",1),t.YNc(3,Nt,2,1,"ng-template",null,2,t.W1O),t.qZA(),t.TgZ(5,"nb-card-body")(6,"form",3),t.YNc(7,Ft,6,5,"div",4),t.YNc(8,Qt,6,3,"ng-template",null,5,t.W1O),t.qZA(),t.YNc(10,Yt,3,0,"div",6),t.YNc(11,Ht,7,2,"div",7),t.qZA(),t.TgZ(12,"nb-card-footer")(13,"button",8),t.NdJ("click",function(){return i.cancel()}),t._uU(14,"Cancelar"),t.qZA(),t.TgZ(15,"button",9),t.NdJ("click",function(){return i.submit()}),t._uU(16,"Enviar"),t.qZA()()()),2&e){const o=t.MAs(4),a=t.MAs(9);t.Q6J("nbSpinner",i.loading),t.xp6(2),t.Q6J("ngIf",!i.apontamento)("ngIfElse",o),t.xp6(4),t.Q6J("formGroup",i.dialogForm),t.xp6(1),t.Q6J("ngIf",!i.apontamento)("ngIfElse",a),t.xp6(3),t.Q6J("ngIf",i.err),t.xp6(1),t.Q6J("ngIf",!!i.prev&&!i.apontamento)}},dependencies:[g.sg,g.O5,h._Y,h.Fj,h.JJ,h.JL,h.sg,h.u,r.DPz,r.Asz,r.yKW,r.XWE,r.ndF,r.$kf,r.B4C,r.fMN,r.h8i,r.rs,r.q51,r.Q7R,g.Nd],styles:["nb-card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center}.body-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:99}.body-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:75%}.data-inserida-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.data-inserida-wrapper[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:small;margin-top:15px;display:flex;align-items:center}.data-inserida-wrapper[_ngcontent-%COMP%]   .bt-remover[_ngcontent-%COMP%]{margin-left:5px;color:#f1363b;display:flex}.motivo-parado[_ngcontent-%COMP%]{margin-top:15px}nb-card-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-around}"]}),n})();var jt=u(4471),S=u(7438),H=u(3380),I=u(2318),$=u(6290),y=u(1316);function Bt(n,s){1&n&&(t.TgZ(0,"div",11)(1,"h3"),t._uU(2,"Erro ao carregar os dados!"),t.qZA(),t.TgZ(3,"h3"),t._uU(4,"Tente novamente mais tarde."),t.qZA()())}function zt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"nb-option",26),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.filtrosDropdown())}),t._uU(1),t.qZA()}if(2&n){const e=s.$implicit,i=s.index;t.Q6J("value",i),t.xp6(1),t.hij("","0"+i+" - "+e," ")}}function Kt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",16)(1,"nb-select",23),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw(2);return t.KtG(a.idSelectedApontamento=o)}),t.TgZ(2,"nb-option",24),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.filtrosDropdown())}),t._uU(3,"Limpar filtro"),t.qZA(),t.YNc(4,zt,2,2,"nb-option",25),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngModel",e.idSelectedApontamento),t.xp6(3),t.Q6J("ngForOf",e.menuApontamento)}}function Wt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){t.CHM(e),t.oxw();const o=t.MAs(8),a=t.oxw();return t.KtG(a.limpaFiltro(o))}),t._UZ(1,"nb-icon",28),t.qZA()}}function Gt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",29)(1,"span"),t._uU(2,"Ordenar datas:"),t.qZA(),t.TgZ(3,"div")(4,"button",30),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.ordenarMenor())}),t._UZ(5,"nb-icon",31),t.qZA(),t.TgZ(6,"button",32),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.ordenarMaior())}),t._UZ(7,"nb-icon",33),t.qZA()()()}}function Vt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",12)(1,"h6",13),t._uU(2,"Filtros"),t.qZA(),t.TgZ(3,"div",14),t.YNc(4,Kt,5,2,"div",15),t.TgZ(5,"div",16)(6,"nb-form-field")(7,"input",17,18),t.NdJ("keyup",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.filtroOP(o))}),t.qZA(),t.YNc(9,Wt,2,0,"button",19),t.TgZ(10,"button",20),t.NdJ("click",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.filtroOP(o))}),t._UZ(11,"nb-icon",21),t.qZA()()(),t.YNc(12,Gt,8,0,"div",22),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngIf",!e.isInterno),t.xp6(5),t.Q6J("ngIf",e.filtroAtivo),t.xp6(3),t.Q6J("ngIf",e.isDistribuicao)}}function Xt(n,s){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"date"),t.ALo(3,"date"),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.AsE(" (de ",t.xi3(2,2,e.dataIni,"dd/MM/yyyy")," a ",t.xi3(3,5,e.dataFim,"dd/MM/yyyy"),")")}}function te(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"nb-tag",40),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.filtraSemana(!0,0))}),t.qZA()}}function ee(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"nb-tag",41),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.filtraSemana(!0,o.semanaAtual,o.anoAtual))}),t.qZA()}if(2&n){const e=t.oxw(2);t.MGl("text","Sem. ",e.semanaAtual,"")}}function ne(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"nb-tag",42),t.NdJ("click",function(){const a=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.filtraSemana(!0,a.semana,a.ano))}),t.qZA()}2&n&&t.MGl("text","Sem. ",s.$implicit.semana,"")}function ie(n,s){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",34)(2,"span"),t._uU(3,"Semana selecionada: "),t.TgZ(4,"b"),t._uU(5),t.qZA(),t.YNc(6,Xt,4,8,"span",5),t.qZA(),t.TgZ(7,"nb-tag-list",35)(8,"nb-tag",36),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.filtraSemana(!0,-1))}),t.qZA(),t.YNc(9,te,1,0,"nb-tag",37),t.YNc(10,ee,1,1,"nb-tag",38),t.YNc(11,ne,1,1,"nb-tag",39),t.qZA()(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(5),t.Oqu(e.semanaSelecionada),t.xp6(1),t.Q6J("ngIf",+e.semanaSelecionada>0),t.xp6(3),t.Q6J("ngIf",e.semanaListAtraso.length>0),t.xp6(1),t.Q6J("ngIf",e.semanaAtual==e.closestSemana),t.xp6(1),t.Q6J("ngForOf",e.semanaListFuturo)}}function oe(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",62)(1,"nb-icon",63),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.openMenu(o))}),t.qZA()()}if(2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("nbContextMenu",e.itemsMenu)}}function ae(n,s){if(1&n&&(t.TgZ(0,"p",64)(1,"b"),t._uU(2,"Previs\xe3o de retorno:"),t.qZA(),t._uU(3),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.hij(" ",e.previsao,"")}}function se(n,s){if(1&n&&(t.TgZ(0,"p",64)(1,"b"),t._uU(2,"Disponibilizado:"),t.qZA(),t._uU(3),t.ALo(4,"date"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.hij(" ",t.xi3(4,1,e.entrada,"dd/MM/yyyy"),"")}}function re(n,s){if(1&n&&(t.TgZ(0,"p",69),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e.motivo_atraso,"")}}function ce(n,s){if(1&n&&(t.TgZ(0,"p",66)(1,"b"),t._uU(2,"Motivo atraso:"),t.qZA(),t._uU(3),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(3),t.hij(" ",e.motivo_atraso," ")}}function le(n,s){if(1&n&&(t.TgZ(0,"div",65)(1,"p",66)(2,"b"),t._uU(3,"Nova previs\xe3o:"),t.qZA(),t._uU(4),t.qZA(),t.YNc(5,re,2,1,"p",67),t.YNc(6,ce,4,1,"p",68),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(4),t.hij(" ",e.novaprevisao,""),t.xp6(1),t.Q6J("ngIf","Adiantamento"==e.motivo_atraso),t.xp6(1),t.Q6J("ngIf","Adiantamento"!=e.motivo_atraso)}}function de(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",65)(1,"nb-alert",70),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.historicoAtraso(o))}),t._uU(2),t.qZA()()}if(2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngClass",e.DS_APONTAMENTO_DS),t.xp6(1),t.hij(" ",e.DS_APONTAMENTO_DS," ")}}function _e(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",71),t._UZ(1,"img",72),t.TgZ(2,"a",73),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.openUrl(o.link_ficha_tecnica))}),t._uU(3," Ficha T\xe9cnica "),t.qZA()()}}function pe(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"nb-card",45)(1,"nb-card-body")(2,"div",46)(3,"div",47),t.NdJ("click",function(){const a=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.openWindow(a.ref.toString()))}),t._UZ(4,"img",48),t.qZA(),t.TgZ(5,"div",49)(6,"div",50)(7,"div",51)(8,"h4"),t._uU(9),t.qZA()(),t.YNc(10,oe,2,1,"div",52),t.ALo(11,"async"),t.qZA(),t.TgZ(12,"div",53)(13,"p",54)(14,"b"),t._uU(15,"Dias na fac\xe7\xe3o:"),t.qZA(),t._uU(16),t._UZ(17,"nb-icon",55),t.qZA(),t.YNc(18,ae,4,1,"p",56),t.YNc(19,se,5,4,"ng-template",null,57,t.W1O),t.YNc(21,le,7,3,"div",58),t.TgZ(22,"p")(23,"b"),t._uU(24,"Ciclo:"),t.qZA(),t._uU(25),t.TgZ(26,"b"),t._uU(27,"OP:"),t.qZA(),t._uU(28),t.qZA(),t.TgZ(29,"p",59)(30,"b"),t._uU(31,"Descri\xe7\xe3o:"),t.qZA(),t._uU(32),t.qZA(),t.TgZ(33,"p",59)(34,"b"),t._uU(35,"Cole\xe7\xe3o:"),t.qZA(),t._uU(36),t.qZA(),t.TgZ(37,"p",60)(38,"b"),t._uU(39,"Pe\xe7as:"),t.qZA(),t._uU(40),t.qZA(),t.YNc(41,de,3,2,"div",58),t.YNc(42,_e,4,0,"div",61),t.qZA()()()()()}if(2&n){const e=s.$implicit,i=t.MAs(20),o=t.oxw(2);t.Q6J("accent",e.accent||"basic"),t.xp6(4),t.Q6J("lazyLoad",e.img)("defaultImage",o.defaultImage),t.xp6(5),t.hij("Ref: ",e.ref,""),t.xp6(1),t.Q6J("ngIf",t.lcZ(11,18,o.showMenu)),t.xp6(6),t.hij(" ",e.diasNaFaccao," "),t.xp6(1),t.Q6J("ngClass",e.statusDiasNaFaccao)("icon",e.iconDiasNaFaccao),t.xp6(1),t.Q6J("ngIf",!o.isInterno)("ngIfElse",i),t.xp6(3),t.Q6J("ngIf",e.checked),t.xp6(4),t.hij(" ",e.ciclo," / "),t.xp6(3),t.hij(" ",e.op,""),t.xp6(4),t.hij(" ",e.descricao,""),t.xp6(4),t.hij(" ",e.colecao,""),t.xp6(4),t.hij(" ",e.qnt,""),t.xp6(1),t.Q6J("ngIf",!o.isDistribuicao),t.xp6(1),t.Q6J("ngIf",o.isDistribuicao)}}function ge(n,s){if(1&n&&(t.TgZ(0,"div")(1,"div",43),t.YNc(2,pe,43,20,"nb-card",44),t.ALo(3,"async"),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",t.lcZ(3,2,e.descOP$))("ngForTrackBy",e.trackByOP)}}function ue(n,s){1&n&&(t.TgZ(0,"h4",74),t._uU(1,"Nenhum item encontrado..."),t.qZA())}function he(n,s){1&n&&(t.TgZ(0,"div")(1,"div",43)(2,"nb-card",75)(3,"nb-card-body")(4,"div",46)(5,"div",76),t._UZ(6,"img",77),t.qZA(),t.TgZ(7,"div",49)(8,"div",50)(9,"div")(10,"h4"),t._uU(11,"Ref:"),t.qZA()(),t.TgZ(12,"div",62),t._UZ(13,"nb-icon",78),t.qZA()(),t.TgZ(14,"div",53)(15,"span"),t._uU(16,"..."),t.qZA(),t.TgZ(17,"p")(18,"b"),t._uU(19,"Previs\xe3o:"),t.qZA()(),t.TgZ(20,"p")(21,"b"),t._uU(22,"Ciclo: "),t.qZA(),t._uU(23," / "),t.TgZ(24,"b"),t._uU(25,"OP: "),t.qZA()(),t.TgZ(26,"p")(27,"b"),t._uU(28,"Descri\xe7\xe3o:"),t.qZA()(),t.TgZ(29,"p")(30,"b"),t._uU(31,"Drop:"),t.qZA()(),t.TgZ(32,"p",60)(33,"b"),t._uU(34,"Pe\xe7as:"),t.qZA()()()()()()()()()),2&n&&(t.xp6(2),t.Q6J("nbSpinner",!0))}const j=108e5;let fe=(()=>{class n{constructor(e,i,o,a,c,_,d,p,l,m,A,C,P,O,x,sn){this._loadingService=e,this.NbDdialogService=i,this.toastrService=o,this.windowService=a,this.nbMenuService=c,this._route=_,this._router=d,this._setTitle=p,this._opsFilteredService=l,this._opsService=m,this._atrasoService=A,this._apontamentoService=C,this._userService=P,this._datatableConstants=O,this._pendenciasService=x,this.changeDetectorRef=sn,this.dtHoje=new Date,this.itensLimite=10,this.selectedApontamento=[],this.idSelectedApontamento=[],this.apontamentoEnum=v.O,this.menuApontamento=[],this.isDistribuicao=!1,this.isInterno=!1,this.isUsuario=!1,this.showMenu=new f.X(!0),this.counter=0,this.defaultImage="../../../../assets/not-found.png",this.urlBase="https://indicium-lbm-client.s3-sa-east-1.amazonaws.com/images/",this.loadingError=!1,this.isEmptyList=!1,this.filtroAtivo=!1,this.routeId="0",this.qntOPs=0,this.qntPecas=0,this.semanaAtual=0,this.anoAtual=0,this.semanaSelecionada="0",this.closestSemana=0,this.semanaList=[],this.semanaListAtraso=[],this.semanaListFuturo=[],this.listOPs=[],this.descOPLoad=new f.X(!0),this.descOP=[],this.descOP$=new f.X(this.descOP),this.imgList=[],this.itemsMenu=[{title:"Atraso"},{title:"Adiantamento"},{title:"Hist\xf3rico Previs\xe3o"},{title:"Apontamento de Produ\xe7\xe3o"},{title:"Download Ficha T\xe9cnica"}]}ngOnInit(){this.dtHoje.setHours(0,0,0,0);let e=this._userService.getNivel();this.routeId=this._route.snapshot.paramMap.get("id"),this.isDistribuicao="302"==this.routeId,this.isInterno=["302","8921"].includes(this.routeId),this.isUsuario=5==e,"fornecedor"==T.i[e]&&(this.itemsMenu=[{title:"Apontamento de Produ\xe7\xe3o"},{title:"Hist\xf3rico"}]),this.verificaAcesso();const i=this._opsFilteredService.getFilter().colecao,o=this._opsFilteredService.getFilterRef();this.getWeek(),this._setTitle.setTitle("Carregando..."),this.subscription=(0,Ct.D)([this._apontamentoService.getApontamento(this.routeId),this._atrasoService.getMotivos(this.routeId),this._opsService.getOpByLocal(this.routeId)]).subscribe(a=>{this.apontamentoList=JSON.parse(a[0].data).filter(d=>d.CD_LOCAL+""==this.routeId);let c=Object.values(v.O).filter(d=>"string"==typeof d);for(let[d,p]of c.entries())this.menuApontamento.push(p);this.motivoList=JSON.parse(a[1].data);let _=JSON.parse(a[2].data);_[0].DS_LOCAL=_[0].DS_LOCAL.replace("EXT. ",""),this.isDistribuicao=302==_[0].CD_LOCAL,(this.isDistribuicao||this.isUsuario)&&this.showMenu.next(!1),this.ajusteDosDados(i,_,o)})}ngAfterContentInit(){this.descOP$.next(this.descOP)}trackByOP(e,i){return i.NR_REDUZIDOOP}ajusteDosDados(e,i,o=""){e.length>0&&(i=i.filter(d=>e.includes(d.NR_CICLO+""))),o&&(i=i.filter(d=>d.CD_REFERENCIA.includes(o))),i.sort((d,p)=>d.DT_PREVRETORNO>p.DT_PREVRETORNO?1:p.DT_PREVRETORNO>d.DT_PREVRETORNO?-1:0);let c,_,a=[];i.forEach(d=>{let p=new Image;p.src=this.urlBase+d.CD_REFERENCIA.toString()+"/"+d.CD_REFERENCIA.toString()+"-1.jpg",p.onerror=()=>{this.imgList=this.imgList.filter(x=>!x.includes(d.CD_REFERENCIA.toString()))};for(let x=1;x<=13;x++)a.push(this.urlBase+d.CD_REFERENCIA.toString()+"/"+d.CD_REFERENCIA.toString()+"-"+x+".jpg"),this.imgList=[...new Set(a)];c=this.filtraMaiorMotivo(d.NR_REDUZIDOOP+"-"+d.CD_LOCAL),_=this.filtraMaiorApontamento(d.NR_REDUZIDOOP+"-"+d.CD_LOCAL);let l=new Date(d.DT_PREVRETORNO||"01/01/2001");l=new Date(l.setHours(l.getHours()+3)),l="Invalid Date"==l.toLocaleString()?new Date("01/01/2001"):new Date(l.setHours(l.getHours()+3));let m="Invalid Date"!=l.toLocaleString()?l.toLocaleString("pt-br").substring(0,10):"01/01/2001",A=new Date(l.getFullYear(),0,1),C=Math.floor((l.getTime()-A.getTime())/864e5),P={semana:0,ano:0};"01/01/2001"!=l.toLocaleString("pt-br").substring(0,10)&&(P=0===l.getDay()?{semana:Math.floor((l.getDay()+1+C)/7)+2,ano:l.getFullYear()}:{semana:Math.abs(Math.floor((l.getDay()+1+C-3)/7))+2,ano:l.getFullYear()});let O=Math.floor((this.dtHoje.getTime()-parseInt(d.DT_ENTRADA))/864e5);this.descOP.push({semana:P.semana,ano:P.ano,cd_local:d.CD_LOCAL,local:d.DS_LOCAL,cod:d.NR_CICLO.toString()+"-"+d.NR_OP.toString()+"-"+d.CD_REFERENCIA.toString(),ciclo:d.NR_CICLO,op:d.NR_OP,ref:d.CD_REFERENCIA+"",NR_REDUZIDOOP:d.NR_REDUZIDOOP,previsao:m,diasNaFaccao:O,statusDiasNaFaccao:O>30?"atencao":O>20?"cuidado":"ok",iconDiasNaFaccao:O>30?"alert-triangle-outline":O>20?"alert-circle-outline":"",entrada:d.DT_ENTRADA,DS_APONTAMENTO_DS:_.DS_APONTAMENTO_DS||"N\xe3o informado",CD_ATRASO:c.cd_atraso,novaprevisao:new Date(c.dt_atraso).toLocaleString("pt-Br",{timeZone:"UTC"}).substring(0,10),motivo_atraso:c.ds_atraso,checked:c.i_checked,descricao:d.DS_GRUPO,drop:d.DS_DROP,colecao:d.DS_COLECAO,img:this.urlBase+d.CD_REFERENCIA.toString()+"/"+d.CD_REFERENCIA.toString()+"-1.jpg",link_ficha_tecnica:this.urlBase+"_FichasTecnicas/"+d.CD_REFERENCIA.toString()+".pdf",status:d.Status,status_color:d.Status.toLowerCase().replace(" ","-"),qnt:d.QT_OP,accent:"Em andamento"==d.Status?"success":"Pendente"==d.Status?"warning":"Em atraso"==d.Status?"danger":"basic"})}),this.listWeeks(this.descOP),this.verifyClosestWeek(),this.ajustarTituloPagina(this.descOP[0].local),this.isDistribuicao&&this.ordenarMenor(),this.descOP$.next(this.descOP),this.descOPLoad.next(!this.descOP.length),this.filtraSemana(!1,parseInt(this.semanaSelecionada))}ordenarMenor(){this.itensLimite=10,this.descOP.sort((e,i)=>{let o=new Date(e.entrada||"0"),a=new Date(i.entrada||"0");return o>a?1:a>o?-1:0}),this.descOP$.next(this.descOP)}ordenarMaior(){this.itensLimite=10,this.descOP.sort((e,i)=>{let o=new Date(e.entrada||"0"),a=new Date(i.entrada||"0");return o<a?1:a<o?-1:0}),this.descOP$.next(this.descOP)}filtraMaiorMotivo(e){if(this.motivoList&&"error"!=this.motivoList.toString()){let i=this.motivoList.filter(o=>o.NR_REDUZIDOOP+"-"+o.CD_LOCAL==e);if(i.length>0){if(this.motivo=i.reduce((o,a)=>o.ID_NOVO_MOTIVO>a.ID_NOVO_MOTIVO?o:a),+this.motivo.DT_PREV_RETORNO_NOVA<+this.dtHoje-j)return{cd_atraso:0,ds_atraso:"",dt_atraso:"",i_checked:!1};if("Adiantamento"==this.motivo.DS_ATRASO_DS){if(+this.motivo.DT_PREV_RETORNO_NOVA>=this.motivo.DT_PREVRETORNO)return{cd_atraso:0,ds_atraso:"",dt_atraso:"",i_checked:!1}}else if("Adiantamento"!=this.motivo.DS_ATRASO_DS&&+this.motivo.DT_PREV_RETORNO_NOVA<=this.motivo.DT_PREVRETORNO)return{cd_atraso:0,ds_atraso:"",dt_atraso:"",i_checked:!1};return{cd_atraso:this.motivo.CD_ATRASO,ds_atraso:this.motivo.DS_ATRASO_DS,dt_atraso:+this.motivo.DT_PREV_RETORNO_NOVA+j,i_checked:!0}}}return{cd_atraso:0,ds_atraso:"",dt_atraso:"",i_checked:!1}}filtraMaiorApontamento(e){if(this.apontamentoList&&"error"!=this.apontamentoList.toString()){let i=this.apontamentoList.filter(o=>o.NR_REDUZIDOOP+"-"+o.CD_LOCAL==e);if(i.length>0)return this.apontamento=i.reduce((o,a)=>o.ID_NOVA_SITUACAO>a.ID_NOVA_SITUACAO?o:a),{DS_APONTAMENTO_DS:this.apontamento.DS_APONTAMENTO_DS,dt_coleta:""}}return{ds_atraso:"",dt_atraso:"",i_checked:!1}}filtroOP(e){this.itensLimite=10,document.getElementById("filtro-op")?.focus();const i=e.target.value;if(this.idSelectedApontamento=[],""==i)this.filtroAtivo=!1,this.descOP$.next(this.descOP),"Todas"!=this.semanaSelecionada&&!this.isInterno&&this.descOP$.next(this.descOP.filter(o=>o.semana==parseInt(this.semanaSelecionada)));else{this.filtroAtivo=!0,this.descOP$.next(this.descOP.filter("Todas"!=this.semanaSelecionada?this.isInterno?a=>a.cod?.includes(i.toUpperCase()):a=>a.cod?.includes(i.toUpperCase())&&a.semana==parseInt(this.semanaSelecionada):a=>a.cod?.includes(i.toUpperCase())));const o=this.descOP$.subscribe(a=>{this.isEmptyList=!a.length,this.countOPs(a)});this.subscription.add(o)}}filtrosDropdown(){this.itensLimite=10,this.selectedApontamento=[],this.idSelectedApontamento.forEach(i=>{this.selectedApontamento.push(this.apontamentoEnum[i])}),this.filtroAtivo=!1,document.getElementById("filtro-op").value="","Todas"!=this.semanaSelecionada?(this.descOP$.next(this.descOP.filter(i=>i.semana==parseInt(this.semanaSelecionada))),0!=this.selectedApontamento.length&&this.descOP$.next(this.descOP.filter(i=>{let o=i.DS_APONTAMENTO_DS?.includes("Parado")?"Parado":i.DS_APONTAMENTO_DS;return this.selectedApontamento.includes(o)&&i.semana==parseInt(this.semanaSelecionada)}))):(this.descOP$.next(this.descOP),0!=this.selectedApontamento.length&&this.descOP$.next(this.descOP.filter(i=>{let o=i.DS_APONTAMENTO_DS?.includes("Parado")?"Parado":i.DS_APONTAMENTO_DS;return this.selectedApontamento.includes(o)})));const e=this.descOP$.subscribe(i=>{this.isEmptyList=!i.length,this.countOPs(i)});this.subscription.add(e)}limpaFiltro(e){this.itensLimite=10,this.filtroAtivo=!1,e.value="",this.descOP$.next(this.descOP),"Todas"!=this.semanaSelecionada&&(this.isInterno||this.descOP$.next(this.descOP.filter(i=>i.semana==parseInt(this.semanaSelecionada))))}filtraSemana(e,i,o){if(this.itensLimite=10,this.qntOPs=0,this.qntPecas=0,e&&(this.semanaSelecionada=this.semanaAtual+""),-1==i)this.semanaSelecionada="Todas",document.getElementById("filtro-op").value="",this.descOP$.next(this.descOP),0!=this.selectedApontamento.length&&this.descOP$.next(this.descOP.filter(c=>{let _=c.DS_APONTAMENTO_DS?.includes("Parado")?"Parado":c.DS_APONTAMENTO_DS;return this.selectedApontamento.includes(_)}));else if(0==i){if(this.semanaSelecionada="Em Atraso",document.getElementById("filtro-op").value="",this.descOP$.next(this.descOP),0!=this.selectedApontamento.length)return void this.descOP$.next(this.descOP.filter(c=>{let _=c.DS_APONTAMENTO_DS?.includes("Parado")?"Parado":c.DS_APONTAMENTO_DS;return this.selectedApontamento.includes(_)&&c.semana<this.semanaAtual&&c.ano<=this.anoAtual}));this.descOP$.next(this.descOP.filter(c=>c.semana<this.semanaAtual&&c.ano<=this.anoAtual))}else this.semanaSelecionada=i.toString(),this.descOP$.next(this.descOP.filter(c=>c.semana==i)),0!=this.selectedApontamento.length&&this.descOP$.next(this.descOP.filter(c=>{let _=c.DS_APONTAMENTO_DS?.includes("Parado")?"Parado":c.DS_APONTAMENTO_DS;return this.selectedApontamento.includes(_)&&c.semana==+this.semanaSelecionada&&c.ano<=this.anoAtual}));const a=this.descOP$.subscribe(c=>{this.getFirstAndLastWeekDay(c[0].previsao),this.isEmptyList=!c.length,this.countOPs(c)});this.subscription.add(a),document.getElementById("filtro-op").value="",this.filtroAtivo=!1}openWindow(e){this.windowService.open(Mt,{context:{list:this.imgList.filter(o=>o.includes(e))},title:"Imagens",buttons:{minimize:!1,maximize:!1,fullScreen:!1,close:!0}})}openMenu(e){this.tempOP=e,this.nbMenuService.onItemClick().pipe((0,Pt.h)(({tag:i})=>"auditor-list"===i),(0,bt.U)(({item:{title:i}})=>i)).subscribe(i=>{this.counter++,1==this.counter&&this.openModal(i)}),this.counter=0}historicoAtraso(e){this.tempOP=e,this.openModal("Hist\xf3rico Apontamento")}openModal(e){let i="Apontamento de Produ\xe7\xe3o"==e,o="Pend\xeancias"==e,a="Hist\xf3rico Previs\xe3o"==e||"Hist\xf3rico Apontamento"==e;if("Download Ficha T\xe9cnica"==e)return window.open(this.tempOP.link_ficha_tecnica,"_blank"),void this.toastrService.success("Download iniciado!","Ficha T\xe9cnica",{preventDuplicates:!0});o?this._router.navigate(["auditor/pendencias",this.tempOP.NR_REDUZIDOOP+"-"+this.tempOP.cd_local]):a?this.NbDdialogService.open(yt,{context:{prevOP:this.tempOP,tipo:e}}):this.NbDdialogService.open($t,{context:{prevOP:this.tempOP,prev:this.tempOP.novaprevisao?.includes("Invalid")?"":this.tempOP.novaprevisao,i_motivo:this.tempOP.motivo_atraso,tipo:e,DS_APONTAMENTO_DS:this.tempOP.DS_APONTAMENTO_DS,apontamento:i}}).onClose.subscribe(_=>{console.log(_),i&&(this.tempOP.DS_APONTAMENTO_DS=_.DS_APONTAMENTO_DS),!!_.prev&&""!=_.prev&&(this.tempOP.novaprevisao=new Date(_.prev).toLocaleString("pt-Br",{timeZone:"UTC"}),this.tempOP.motivo_atraso=_.motivo,this.tempOP.checked=!0),_.removed&&(this.tempOP.novaprevisao="",this.tempOP.checked=!1),this.filtraMaiorMotivo(this.tempOP.NR_REDUZIDOOP+"-"+this.tempOP.cd_local),this.changeDetectorRef.detectChanges()})}countOPs(e){this.qntOPs=e.length;let i=[];e.forEach(o=>{i.push(o.qnt)}),this.qntPecas=i.reduce((o,a)=>parseInt(o)+parseInt(a),0)}getFirstAndLastWeekDay(e){const i=e.split("/");let o=new Date(i[1]+"/"+i[0]+"/"+i[2]),a=new Date(o.getTime()-3456e5);this.dataIni=new Date(o.getTime()-864e5*a.getDay()),this.dataFim=new Date(this.dataIni.getTime()+5184e5)}getWeek(){let e=new Date,i=new Date(e.getFullYear(),0,1),o=Math.floor((e.getTime()-i.getTime())/864e5);this.semanaAtual=Math.floor((e.getDay()+1+o-3)/7)+2,this.anoAtual=e.getFullYear(),this.semanaSelecionada=this.semanaAtual+""}listWeeks(e){e.forEach(i=>{this.semanaList.push({semana:i.semana,ano:i.ano}),this.semanaList=[...new Set(this.semanaList)];let o=this.semanaList.filter(l=>l.semana<this.semanaAtual&&l.ano==this.anoAtual),a=this.semanaList.filter(l=>l.ano<this.anoAtual),c=o.concat(a);this.semanaListAtraso=c.flatMap(l=>l.semana),this.semanaListAtraso=[...new Set(this.semanaListAtraso)],this.semanaListAtraso.sort((l,m)=>l>m?1:-1);let _=this.semanaList.filter(l=>l.semana>this.semanaAtual&&l.ano==this.anoAtual),d=this.semanaList.filter(l=>l.ano>this.anoAtual),p=_.concat(d);this.semanaListFuturo=[...new Map(p.map(l=>[JSON.stringify([l.semana,l.ano]),l])).values()],this.semanaListFuturo=[...new Set(this.semanaListFuturo)],this.semanaListFuturo.sort((l,m)=>l.ano>m.ano||l.semana>m.semana?1:-1)})}verifyClosestWeek(){let e=this.semanaList.filter(i=>i.ano==this.anoAtual).flatMap(i=>i.semana);e.length>0&&(this.closestSemana=e.reduce((i,o)=>{let a=Math.abs(i-parseInt(this.semanaSelecionada)),c=Math.abs(o-parseInt(this.semanaSelecionada));return a==c?i>o?i:o:c<a?o:i})),this.semanaSelecionada=this.closestSemana.toString()}verificaAcesso(){let e=this._userService.getNivel(),i=this._userService.getSession().login||"";if(0==this._datatableConstants.getUsuariosPendencias().length){const o=this._pendenciasService.getUsuariosPendencias().subscribe({next:a=>{this._datatableConstants.setUsuariosPendencias(a),a.includes(i)&&this.itemsMenu.push({title:"Pend\xeancias"})},error:a=>{throw new Error(a)}});this.subscription?this.subscription.add(o):this.subscription=o}("auditor"==T.i[e]||this._datatableConstants.getUsuariosPendencias().includes(i))&&this.itemsMenu.push({title:"Pend\xeancias"})}ajustarTituloPagina(e){let i=e;this.isInterno||(i=this.removerTextoDesnecessario(i.trim())),this._setTitle.setTitle(i)}removerTextoDesnecessario(e){return e.replace("COSTURA","").replace("CONSERTO","").replace("ESTAMPARIA","").replace("TERCEIROS","")}openUrl(e){window.open(e,"_blank")}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(jt.b),t.Y36(r.Gln),t.Y36(r.quB),t.Y36(r.eJ1),t.Y36(r.kkI),t.Y36(b.gz),t.Y36(b.F0),t.Y36(S.H),t.Y36(H.C),t.Y36(I.W),t.Y36(N.i),t.Y36(U.y),t.Y36(M.K),t.Y36($.r),t.Y36(y.x),t.Y36(t.sBO))},n.\u0275cmp=t.Xpm({type:n,selectors:[["fc-descricao-faccao"]],decls:26,vars:14,consts:[[1,"body-wrapper"],["id","top-page"],["style","text-align: center;",4,"ngIf","ngIfElse"],["filter",""],[1,"toolbar-wrapper"],[4,"ngIf"],[1,"toolbar-info"],[1,"toolbar-value"],[1,"h6"],[4,"ngIf","ngIfElse"],["listaVazia",""],[2,"text-align","center"],[1,"filter-wrapper"],[1,"filter-title"],[1,"filter-menu-wrapper"],["class","filter-dropdown",4,"ngIf"],[1,"filter-dropdown"],["type","text","id","filtro-op","nbInput","","placeholder","Filtrar Ciclo, OP ou Ref",3,"keyup"],["filtro",""],["nbPrefix","","nbButton","","ghost","",3,"click",4,"ngIf"],["nbSuffix","","nbButton","","ghost","",3,"click"],["icon","search-outline","aria-label","pesquisar"],["class","order-bts",4,"ngIf"],["multiple","","placeholder","Apontamento","status","primary",3,"ngModel","ngModelChange"],[3,"click"],["style","font-size: 12px !important;",3,"value","click",4,"ngFor","ngForOf"],[2,"font-size","12px !important",3,"value","click"],["nbPrefix","","nbButton","","ghost","",3,"click"],["icon","close-square-outline","aria-label","pesquisar"],[1,"order-bts"],["nbButton","","nbTooltip","ordenar do menor","shape","round","ghost","",3,"click"],["icon","arrow-up-outline"],["nbButton","","nbTooltip","ordenar do maior","shape","round","ghost","",3,"click"],["icon","arrow-down-outline"],[1,"tag-wrapper"],[2,"margin","5px"],["status","basic","appearance","outline","text"," Todas ",3,"click"],["status","danger","appearance","outline","text"," Em Atraso ",3,"click",4,"ngIf"],["status","primary","appearance","filled",3,"text","click",4,"ngIf"],["status","success","appearance","outline",3,"text","click",4,"ngFor","ngForOf"],["status","danger","appearance","outline","text"," Em Atraso ",3,"click"],["status","primary","appearance","filled",3,"text","click"],["status","success","appearance","outline",3,"text","click"],[1,"card-wrapper"],["class","search-results",3,"accent",4,"ngFor","ngForOf","ngForTrackBy"],[1,"search-results",3,"accent"],[1,"c-body-wrapper"],[1,"c-img",3,"click"],["alt","op-img",3,"lazyLoad","defaultImage"],[1,"c-desc"],[1,"c-header"],[1,"titulo"],["class","bt-edit",4,"ngIf"],[1,"c-body"],[1,"parag","qt-dias"],[3,"ngClass","icon"],["class","parag",4,"ngIf","ngIfElse"],["entrada",""],["class","nv-prev",4,"ngIf"],[1,"desc-text"],[1,"c-qnt"],["class","pdf-wrapper",4,"ngIf"],[1,"bt-edit"],["icon","more-vertical-outline","nbContextMenuTag","auditor-list","nbContextMenuTrigger","click",3,"nbContextMenu","click"],[1,"parag"],[1,"nv-prev"],[1,"nv-prev-text","atraso"],["class","nv-prev-text adiantamento-text",4,"ngIf"],["class","nv-prev-text atraso",4,"ngIf"],[1,"nv-prev-text","adiantamento-text"],[1,"nv-alert",3,"ngClass","click"],[1,"pdf-wrapper"],["src","../../../../assets/pdf.png","alt","download_pdf",1,"ico-pdf"],[1,"pdf-link",3,"click"],[1,"error-notfound"],["nbSpinnerStatus","primary",3,"nbSpinner"],[1,"c-img"],["src","../../../../assets/not-found.png","alt","op-img"],["icon","more-vertical-outline"]],template:function(e,i){if(1&e&&(t.TgZ(0,"nb-layout")(1,"nb-layout-column")(2,"div",0),t._UZ(3,"div",1),t.YNc(4,Bt,5,0,"div",2),t.YNc(5,Vt,13,3,"ng-template",null,3,t.W1O),t.TgZ(7,"div",4),t.YNc(8,ie,12,5,"ng-container",5),t.TgZ(9,"div",6)(10,"div",7)(11,"div"),t._uU(12," Qtd. OP's: "),t.qZA(),t.TgZ(13,"div",8),t._uU(14),t.qZA()(),t.TgZ(15,"div",7)(16,"div"),t._uU(17," Qtd. Pe\xe7as: "),t.qZA(),t.TgZ(18,"div",8),t._uU(19),t.ALo(20,"number"),t.qZA()()()(),t.YNc(21,ge,4,4,"div",9),t.YNc(22,ue,2,0,"ng-template",null,10,t.W1O),t.YNc(24,he,35,1,"div",5),t.ALo(25,"async"),t.qZA()()()),2&e){const o=t.MAs(6),a=t.MAs(23);t.xp6(4),t.Q6J("ngIf",i.loadingError)("ngIfElse",o),t.xp6(4),t.Q6J("ngIf",!i.isInterno),t.xp6(6),t.hij(" ",i.qntOPs," "),t.xp6(5),t.hij(" ",t.Dn7(20,8,i.qntPecas,"1.0","pt-Br")," "),t.xp6(2),t.Q6J("ngIf",!i.isEmptyList)("ngIfElse",a),t.xp6(3),t.Q6J("ngIf",t.lcZ(25,12,i.descOPLoad))}},dependencies:[g.mk,g.sg,g.O5,h.JJ,h.On,w.z1,r.$9b,r.DPz,r.Asz,r.yKW,r.SrF,r.fMN,r.h8i,r.jBG,r.t3q,r.yyc,r.Aqw,r.dP_,r.rs,r.q51,r.Q7R,r.c2L,r.d0f,r.jNv,g.Ov,g.JJ,g.uU],styles:['@charset "UTF-8";.body-wrapper[_ngcontent-%COMP%]{position:relative;margin:1em}nb-layout-column[_ngcontent-%COMP%]{padding:0!important}.filter-wrapper[_ngcontent-%COMP%]{margin:30px 15px 15px;padding:10px;border:1px solid lightblue;border-radius:5px;background-color:var(--background-basic-color-2)}.filter-wrapper[_ngcontent-%COMP%]   .filter-title[_ngcontent-%COMP%]{font-weight:600;margin-top:-20px;background:linear-gradient(0deg,var(--background-basic-color-2) 0%,var(--background-basic-color-2) 55%,rgba(255,255,255,0) 55%,rgba(255,255,255,0) 100%);width:max-content;padding:0 5px;-webkit-user-select:none;user-select:none}.filter-wrapper[_ngcontent-%COMP%]   .filter-menu-wrapper[_ngcontent-%COMP%]{margin-left:2em;display:flex;flex-wrap:wrap;align-items:center}.filter-wrapper[_ngcontent-%COMP%]   .filter-dropdown[_ngcontent-%COMP%]{margin-right:15px}  nb-select{width:275px}.toolbar-wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;flex:1;background-color:var(--input-basic-background-color);justify-content:space-around;padding:.75rem 4rem .5rem;border:1px solid var(--background-basic-color-3);border-right:none;border-left:none;border-radius:15px}.tag-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}.tag-wrapper[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:small}  .nb-tag-list-tags-wrapper{justify-content:center!important}nb-tag[_ngcontent-%COMP%]{min-width:89px;justify-content:center}.toolbar-info[_ngcontent-%COMP%]{display:flex;width:15em;justify-content:space-between;align-items:center;margin-top:10px}.toolbar-value[_ngcontent-%COMP%]{margin:0 10px;text-align:center}.toolbar-value[_ngcontent-%COMP%]   .h6[_ngcontent-%COMP%]{font-size:1.125rem;font-family:Open Sans,sans-serif;font-weight:700;line-height:1.5rem}.order-bts[_ngcontent-%COMP%]{margin-left:auto;margin-right:1em}.order-bts[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.85em;color:var(--text-hint-color)}.order-bts[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-top:-.65em}.titulo[_ngcontent-%COMP%]{font-family:Trebuchet MS,Lucida Sans Unicode,Lucida Grande,Lucida Sans,Arial,sans-serif;text-align:center}.card-wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}.card-wrapper[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{width:500px;margin:10px;box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}.card-wrapper[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:0}.c-body-wrapper[_ngcontent-%COMP%]{display:flex;max-height:350px}.c-body-wrapper[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:22px;margin:5px 0}.c-body-wrapper[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:small}.c-body-wrapper[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:smaller}.pdf-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;max-width:11em;padding:.35em;background-color:var(--background-basic-color-2);border:1px solid var(--border-basic-color-4);border-radius:1em;cursor:pointer}.pdf-wrapper[_ngcontent-%COMP%]:hover{background-color:var(--background-basic-color-4);border:1px solid var(--border-basic-color-5)}.pdf-wrapper[_ngcontent-%COMP%]:hover   .pdf-link[_ngcontent-%COMP%]{text-transform:uppercase;font-size:.9em}.ico-pdf[_ngcontent-%COMP%]{max-height:2em;margin-right:.5em}.pdf-link[_ngcontent-%COMP%]{text-decoration:none;color:var(--text-basic-color);font-weight:600}nb-alert[_ngcontent-%COMP%]{height:25px;font-size:13px;padding:1px 10px;display:inline-block;cursor:pointer;margin:5px 0 0;color:var(--color-basic-100);background:var(--color-danger-default)}.c-desc[_ngcontent-%COMP%]{padding:0 10px 10px;max-height:310px}.c-desc[_ngcontent-%COMP%]   .nv-prev[_ngcontent-%COMP%]{padding-bottom:0;margin-block:.4em}.c-desc[_ngcontent-%COMP%]   .nv-prev[_ngcontent-%COMP%]   .nv-prev-text[_ngcontent-%COMP%]{margin:0;line-height:1;color:var(--color-danger-default)}.c-desc[_ngcontent-%COMP%]   .nv-prev[_ngcontent-%COMP%]   .nv-prev-text[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:var(--text-basic-color)!important}.c-desc[_ngcontent-%COMP%]   .nv-prev[_ngcontent-%COMP%]   .c-status[_ngcontent-%COMP%]{font-weight:600}.c-desc[_ngcontent-%COMP%]   .nv-prev[_ngcontent-%COMP%]   .adiantamento-text[_ngcontent-%COMP%]{color:var(--color-success-new)}.c-desc[_ngcontent-%COMP%]   .nv-prev[_ngcontent-%COMP%]   .Adiantamento[_ngcontent-%COMP%]{background:var(--color-success-new)}.c-desc[_ngcontent-%COMP%]   .nv-prev[_ngcontent-%COMP%]   .fila[_ngcontent-%COMP%]{background:var(--color-primary-400)}.c-desc[_ngcontent-%COMP%]   .nv-prev[_ngcontent-%COMP%]   .produ\\e7\\e3o[_ngcontent-%COMP%]{background:var(--color-info-500)}.c-desc[_ngcontent-%COMP%]   .nv-prev[_ngcontent-%COMP%]   .Parado[_ngcontent-%COMP%]{background:var(--color-warning-500)}.c-desc[_ngcontent-%COMP%]   .nv-prev[_ngcontent-%COMP%]   .inspe\\e7\\e3o[_ngcontent-%COMP%]{background:var(--color-warning-new)}.c-desc[_ngcontent-%COMP%]   .nv-prev[_ngcontent-%COMP%]   .coleta[_ngcontent-%COMP%]{background:var(--color-success-500)}.c-desc[_ngcontent-%COMP%]   .nv-prev[_ngcontent-%COMP%]   .Coletado[_ngcontent-%COMP%]{background:var(--color-success-700)}.c-desc[_ngcontent-%COMP%]   .nv-prev[_ngcontent-%COMP%]   .industrializado[_ngcontent-%COMP%]{background:var(--color-danger-800)}.c-desc[_ngcontent-%COMP%]   .nv-prev[_ngcontent-%COMP%]   .contagem[_ngcontent-%COMP%]{background:var(--color-carefull)}.c-body[_ngcontent-%COMP%]   .desc-text[_ngcontent-%COMP%]{font-size:12px;line-height:1;margin:7px 0}.c-body[_ngcontent-%COMP%]   .parag[_ngcontent-%COMP%]{font-size:1em;margin-block:.2em}.c-body[_ngcontent-%COMP%]   .qt-dias[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.atencao[_ngcontent-%COMP%]{color:var(--color-danger-800)!important}.cuidado[_ngcontent-%COMP%]{color:var(--color-warning-500)!important}.c-img[_ngcontent-%COMP%]{max-width:200px;display:flex;align-items:center}.c-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto;max-width:180px;height:100%;object-fit:cover;cursor:pointer}.c-desc[_ngcontent-%COMP%]{width:-webkit-fill-available}.c-desc[_ngcontent-%COMP%]   .bt-edit[_ngcontent-%COMP%]{cursor:pointer}.c-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.error-notfound[_ngcontent-%COMP%]{text-align:center;margin-top:3em}@media (max-width: 360px){.titulo[_ngcontent-%COMP%]{font-size:25px}.filter-wrapper[_ngcontent-%COMP%]{margin-right:0}.c-body-wrapper[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:20px}.c-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:-webkit-fill-available;max-width:115px}.pend\\eancia[_ngcontent-%COMP%]{height:33px!important;line-height:1;padding:3px 10px!important}}@media (min-width: 360px) and (max-width: 475px){.filter-wrapper[_ngcontent-%COMP%]{margin:18px 0}.filter-wrapper[_ngcontent-%COMP%]   .filter-menu-wrapper[_ngcontent-%COMP%]{margin:0!important;justify-content:center}.filter-dropdown[_ngcontent-%COMP%]{margin:0 0 10px!important}.titulo[_ngcontent-%COMP%]{font-size:25px}.c-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:-webkit-fill-available;max-width:132px}.toolbar-wrapper[_ngcontent-%COMP%]{padding:.75rem 1rem .5rem}.toolbar-info[_ngcontent-%COMP%]{margin-top:20px}.c-qnt[_ngcontent-%COMP%]{margin-bottom:3px}.pend\\eancia[_ngcontent-%COMP%]{height:33px!important;line-height:1;padding:3px 10px!important}}'],changeDetection:0}),n})();function Oe(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"nb-option",19),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.filtroDropdown())}),t._uU(1),t.qZA()}if(2&n){const e=s.$implicit;t.Q6J("value",s.index),t.xp6(1),t.hij("",e," ")}}function Ce(n,s){if(1&n&&(t.ynx(0),t.TgZ(1,"tr")(2,"td",20),t._uU(3),t.qZA(),t.TgZ(4,"td",21),t._uU(5),t.qZA(),t.TgZ(6,"td",22),t._uU(7),t.qZA(),t.TgZ(8,"td",23),t._uU(9),t.qZA(),t.TgZ(10,"td",24),t._uU(11),t.qZA(),t.TgZ(12,"td",25),t._uU(13),t.qZA(),t.TgZ(14,"td",26)(15,"nb-alert",27),t._uU(16),t.qZA()(),t.TgZ(17,"td",28),t._uU(18),t.qZA(),t._UZ(19,"hr"),t.qZA(),t.BQk()),2&n){const e=s.$implicit;t.xp6(3),t.Oqu(e.NR_CICLO+"-"+e.NR_OP+"-"+e.CD_REFERENCIA),t.xp6(2),t.Oqu(e.DS_CLASSIFICACAO),t.xp6(2),t.Oqu(e.CD_PRODUTO_MP+" - "+e.DS_PRODUTO_MP),t.xp6(2),t.Oqu(e.QT_SOLICITADO),t.xp6(2),t.Oqu(e.DS_USUARIO),t.xp6(2),t.Oqu(e.DT_SOLICITACAO),t.xp6(2),t.Q6J("ngClass",e.DS_STATUS_PENDENCIA),t.xp6(1),t.Oqu(e.DS_STATUS_PENDENCIA),t.xp6(2),t.Oqu(e.OBS)}}function Pe(n,s){if(1&n&&(t.ynx(0),t.TgZ(1,"nb-card")(2,"nb-card-header")(3,"h4"),t._uU(4),t.qZA()(),t.TgZ(5,"nb-card-body")(6,"table",16)(7,"tr")(8,"th"),t._uU(9,"C\xf3d. OP"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Classifica\xe7\xe3o"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Mat\xe9ria Prima"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Qtd. Solicitada"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Usu\xe1rio Solicitante"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Data Solicita\xe7\xe3o"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Status"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Observa\xe7\xf5es"),t.qZA()(),t.YNc(24,Ce,20,9,"ng-container",14),t.qZA()()(),t.BQk()),2&n){const e=s.$implicit;t.xp6(4),t.Oqu(e.local),t.xp6(20),t.Q6J("ngForOf",e.pendencias)}}function be(n,s){1&n&&(t.ynx(0),t.TgZ(1,"tr")(2,"th"),t._uU(3,"C\xf3d. OP"),t.qZA(),t.TgZ(4,"th"),t._uU(5,"Classifica\xe7\xe3o"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Mat\xe9ria Prima"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Qtd. Solicitada"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Usu\xe1rio Solicitante"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Data Solicita\xe7\xe3o"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Status"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Observa\xe7\xf5es"),t.qZA()(),t.TgZ(18,"tr")(19,"td",20),t._uU(20,"..."),t.qZA(),t.TgZ(21,"td",21),t._uU(22,"..."),t.qZA(),t.TgZ(23,"td",22),t._uU(24,"..."),t.qZA(),t.TgZ(25,"td",23),t._uU(26,"..."),t.qZA(),t.TgZ(27,"td",25),t._uU(28,"..."),t.qZA(),t.TgZ(29,"td",26),t._uU(30,"..."),t.qZA(),t.TgZ(31,"td",28),t._uU(32,"..."),t.qZA(),t.TgZ(33,"td",29),t._uU(34," ... "),t.qZA()(),t._UZ(35,"hr"),t.BQk())}function ve(n,s){1&n&&(t.TgZ(0,"tr")(1,"td",31)(2,"h4"),t._uU(3,"Nenhum item encontrado!"),t.qZA()()())}function Ae(n,s){if(1&n&&t.YNc(0,ve,4,0,"tr",30),2&n){const e=t.oxw();t.Q6J("ngIf",0==e.minhasPendencias.length)}}let xe=(()=>{class n{constructor(e,i,o,a){this._location=e,this._setTituloService=i,this._userService=o,this._pendenciaService=a,this.ignoredStatus=["Em an\xe1lise","Almoxarifado","Enviado"],this.statusPendencia=[],this.selectedStatusPendencia="",this.localEnum=[],this.selectedLocal=[],this.idSelectedLocal=[],this.loading=new f.X(!0),this.loadingError=!1,this.isEmptyList=!1,this.minhasPendencias=[],this.minhasPendenciasLocal=[],this.minhasPendencias$=new f.X([]),this.minhasPendenciasLocal$=new f.X([])}ngOnInit(){this._setTituloService.setTitle("Carregando...");let e=0;this._userService.getUser().subscribe(i=>e=i.CD_USUARIO),this._pendenciaService.listPendencia(e,0).subscribe({next:i=>{this.minhasPendencias=JSON.parse(i.data),this.minhasPendencias=this.minhasPendencias.filter(a=>!this.ignoredStatus.includes(a.DS_STATUS_PENDENCIA)),this.minhasPendencias.forEach(a=>{let c=new Date(a.DT_SOLICITACAO);a.DT_SOLICITACAO=new Date(c).toLocaleString("pt-Br",{timeZone:"UTC"}),a.cod=a.NR_CICLO+"-"+a.NR_OP+"-"+a.CD_REFERENCIA,this.minhasPendenciasLocal.length>0&&this.minhasPendenciasLocal.filter(_=>_.local==a.CD_LOCAL+" - "+a.DS_LOCAL).length?this.minhasPendenciasLocal.filter(_=>_.local==a.CD_LOCAL+" - "+a.DS_LOCAL)[0].pendencias.push(a):this.minhasPendenciasLocal.push({local:a.CD_LOCAL+" - "+a.DS_LOCAL,pendencias:[a]})});let o=this.minhasPendenciasLocal.flatMap(a=>a.local);this.localEnum=Array.from(new Set(o)),this.minhasPendenciasLocal$.next(this.minhasPendenciasLocal),this._setTituloService.setTitle("Hist\xf3rico de Pend\xeancias"),this.loading.next(!1)},error:i=>{this.isEmptyList=!0,this.loading.next(!1)}})}filtroOP(e){this.idSelectedLocal=[],document.getElementById("filtro-op")?.focus();const i=e.target.value;this.minhasPendenciasLocal$.next(this.minhasPendenciasLocal);let o=this.minhasPendenciasLocal;i.length>0&&(o=this.minhasPendenciasLocal.map(a=>({...a,pendencias:a.pendencias.filter(_=>_.cod?.includes(i))})),o=o.filter(a=>a.pendencias.length>0),this.orderByQntPendencia(o),this.minhasPendenciasLocal$.next(o))}filtroDropdown(){if(document.getElementById("filtro-op").value="",this.selectedLocal=[],this.idSelectedLocal.forEach(e=>{this.selectedLocal.push(this.localEnum[e])}),this.minhasPendenciasLocal$.next(this.minhasPendenciasLocal),this.selectedLocal.length>0){let e=this.minhasPendenciasLocal.filter(i=>this.selectedLocal.includes(i.local));e=e.filter(i=>i.pendencias.length>0),this.orderByQntPendencia(e),this.minhasPendenciasLocal$.next(e)}}orderByQntPendencia(e){e.sort((i,o)=>i.pendencias.length<o.pendencias.length?1:o.pendencias.length<i.pendencias.length?-1:0)}voltar(){this._location.back()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.Ye),t.Y36(S.H),t.Y36(M.K),t.Y36(y.x))},n.\u0275cmp=t.Xpm({type:n,selectors:[["fc-hist-pendencias"]],decls:28,vars:9,consts:[[1,"body-wrapper"],[1,"voltar"],[3,"click"],[1,"filter-wrapper"],[1,"filter-title"],[1,"filter-menu-wrapper"],[1,"filter-dropdown"],["multiple","","placeholder","Local","status","primary",3,"ngModel","ngModelChange"],["style","font-size: 12px !important;",3,"value","click",4,"ngFor","ngForOf"],["type","text","id","filtro-op","nbInput","","placeholder","Filtrar Ciclo, OP ou Ref",3,"keyup"],["filtro",""],["nbSuffix","","nbButton","","ghost",""],["icon","search-outline","aria-label","pesquisar"],[1,"card-wrapper"],[4,"ngFor","ngForOf"],[1,"table-wrapper"],[1,"rwd-table"],[4,"ngIf","ngIfElse"],["error",""],[2,"font-size","12px !important",3,"value","click"],["data-th","C\xf3d. OP"],["data-th","Classifica\xe7\xe3o"],["data-th","Mat\xe9ria Prima"],["data-th","Qtd. Solicitada"],["data-th","Usu\xe1rio Solicitante"],["data-th","Data Solicita\xe7\xe3o"],["data-th","Status"],[1,"nv-alert",3,"ngClass"],["data-th","Observa\xe7\xf5es"],["data-th","Confirmar Recebimento",1,"recebido-row"],[4,"ngIf"],["colspan","100%",1,"error-loading"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"a",2),t.NdJ("click",function(){return i.voltar()}),t._uU(3,"Voltar"),t.qZA()(),t.TgZ(4,"div",3)(5,"h6",4),t._uU(6,"Filtros"),t.qZA(),t.TgZ(7,"div",5)(8,"div",6)(9,"nb-select",7),t.NdJ("ngModelChange",function(a){return i.idSelectedLocal=a}),t.TgZ(10,"nb-option",2),t.NdJ("click",function(){return i.filtroDropdown()}),t._uU(11,"Limpar filtro"),t.qZA(),t.YNc(12,Oe,2,2,"nb-option",8),t.qZA()(),t.TgZ(13,"div",6)(14,"nb-form-field")(15,"input",9,10),t.NdJ("keyup",function(a){return i.filtroOP(a)}),t.qZA(),t.TgZ(17,"button",11),t._UZ(18,"nb-icon",12),t.qZA()()()()(),t.TgZ(19,"div",13),t.YNc(20,Pe,25,2,"ng-container",14),t.ALo(21,"async"),t.qZA(),t.TgZ(22,"div",15)(23,"table",16),t.YNc(24,be,36,0,"ng-container",17),t.ALo(25,"async"),t.YNc(26,Ae,1,1,"ng-template",null,18,t.W1O),t.qZA()()()),2&e){const o=t.MAs(27);t.xp6(9),t.Q6J("ngModel",i.idSelectedLocal),t.xp6(3),t.Q6J("ngForOf",i.localEnum),t.xp6(8),t.Q6J("ngForOf",t.lcZ(21,5,i.minhasPendenciasLocal$)),t.xp6(4),t.Q6J("ngIf",t.lcZ(25,7,i.loading))("ngIfElse",o)}},dependencies:[g.mk,g.sg,g.O5,h.JJ,h.On,r.$9b,r.DPz,r.Asz,r.yKW,r.ndF,r.fMN,r.h8i,r.jBG,r.yyc,r.rs,r.q51,g.Ov],styles:['@charset "UTF-8";.body-wrapper[_ngcontent-%COMP%]{margin:1em}.voltar[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin:1.5em .5em .5em;font-size:1.25em}.voltar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer}.filter-wrapper[_ngcontent-%COMP%]{margin:30px 15px 15px;padding:10px;border:1px solid lightblue;border-radius:5px;background-color:var(--background-basic-color-2)}.filter-wrapper[_ngcontent-%COMP%]   .filter-title[_ngcontent-%COMP%]{font-weight:600;margin-top:-20px;background:linear-gradient(0deg,var(--background-basic-color-2) 0%,var(--background-basic-color-2) 55%,rgba(255,255,255,0) 55%,rgba(255,255,255,0) 100%);width:max-content;padding:0 5px;-webkit-user-select:none;user-select:none}.filter-wrapper[_ngcontent-%COMP%]   .filter-menu-wrapper[_ngcontent-%COMP%]{margin-left:2em;display:flex;flex-wrap:wrap;align-items:center}.filter-wrapper[_ngcontent-%COMP%]   .filter-dropdown[_ngcontent-%COMP%]{margin-right:15px}nb-alert[_ngcontent-%COMP%]{min-height:25px;font-size:13px;padding:1px 10px;display:inline-block;margin:5px 0 0;color:var(--color-basic-100);background:var(--color-danger-default);-webkit-user-select:none;user-select:none;text-align:center}.nv-alert[_ngcontent-%COMP%]{min-height:25px;font-size:13px;padding:1px 10px;display:inline-block;margin:5px 0 0;color:var(--color-basic-100);background:var(--color-danger-default);-webkit-user-select:none;user-select:none;text-align:center;border-radius:7px}.nv-alert[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.an\\e1lise[_ngcontent-%COMP%]{background:var(--color-warning-500)}.Recusado[_ngcontent-%COMP%]{background:var(--color-danger-500)}.Almoxarifado[_ngcontent-%COMP%]{background:var(--color-primary-500)}.Enviado[_ngcontent-%COMP%]{background-color:var(--color-success-500)}.Finalizado[_ngcontent-%COMP%]{background-color:var(--color-success-900)}.table-wrapper[_ngcontent-%COMP%]{margin:2em 0 0;width:-moz-fit-content;width:fit-content;display:flex;justify-content:center}@media (min-width: 480px){.table-wrapper[_ngcontent-%COMP%]{margin:0 auto}}.rwd-table[_ngcontent-%COMP%]{margin:0;min-width:300px}.rwd-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-top:1px solid #ddd;border-bottom:1px solid #ddd}.rwd-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:1em;display:none}.rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.85em;display:block}.rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{padding-top:.5em}.rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{padding-bottom:.5em}.rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-th) ": ";font-weight:700;width:7em;display:inline-block}@media (min-width: 480px){.rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{display:none}}.rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{max-width:3.75rem}.rwd-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:left}@media (min-width: 480px){.rwd-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:table-cell;padding:.25em .5em;text-align:center}.rwd-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child, .rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{padding-left:0}.rwd-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child, .rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{padding-right:0}}body[_ngcontent-%COMP%]{padding:0 2em;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;color:#444;background:#eee}h1[_ngcontent-%COMP%]{font-weight:400;letter-spacing:-1px;color:#34495e}.rwd-table[_ngcontent-%COMP%]{background:var(--background-basic-color-1);color:var(--text-basic-color);font-weight:400;border-radius:.4em;overflow:hidden}.rwd-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-color:var(--background-basic-color-1)}.rwd-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{margin:.5em 1em}@media (min-width: 480px){.rwd-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1em!important}.rwd-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{max-width:4.75rem}}.rwd-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{color:var(--text-heading-table)}.error-loading[_ngcontent-%COMP%]{background-color:var(--background-basic-color-3);text-align:center!important}']}),n})();var Te=u(9219);function Me(n,s){if(1&n&&(t.TgZ(0,"div"),t._UZ(1,"fc-card",5),t.qZA()),2&n){const e=s.$implicit;t.xp6(1),t.Q6J("loading",!0)("title","...")("qnt_ops",0)("c_status",e)("qnt_atraso",0)("show_desc",!0)}}function Se(n,s){if(1&n&&(t.TgZ(0,"div")(1,"div",3),t.YNc(2,Me,2,6,"div",4),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.color)}}function we(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"nb-option",20),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.filtrosDropdown())}),t._uU(1),t.qZA()}if(2&n){const e=s.$implicit;t.Q6J("value",e),t.xp6(1),t.hij("",e," ")}}function De(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e),t.oxw();const o=t.MAs(12),a=t.oxw();return t.KtG(a.limpaFiltro(o))}),t._UZ(1,"nb-icon",22),t.qZA()}}function Ze(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e),t.oxw();const o=t.MAs(19),a=t.oxw();return t.KtG(a.limpaFiltro(o))}),t._UZ(1,"nb-icon",22),t.qZA()}}function Ee(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",6)(1,"h6",7),t._uU(2,"Filtros"),t.qZA(),t.TgZ(3,"div",8)(4,"div",9)(5,"nb-select",10),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.selectedColecao=o)}),t.TgZ(6,"nb-option",11),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.filtrosDropdown())}),t._uU(7,"Limpar filtro"),t.qZA(),t.YNc(8,we,2,2,"nb-option",12),t.qZA()(),t.TgZ(9,"div",9)(10,"nb-form-field")(11,"input",13,14),t.NdJ("keyup",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.filtroFaccao(o))}),t.qZA(),t.YNc(13,De,2,0,"button",15),t.TgZ(14,"button",16),t.NdJ("click",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.filtroFaccao(o))}),t._UZ(15,"nb-icon",17),t.qZA()()(),t.TgZ(16,"div",9)(17,"nb-form-field")(18,"input",18,19),t.NdJ("keyup",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.filtroOP(o))}),t.qZA(),t.YNc(20,Ze,2,0,"button",15),t.TgZ(21,"button",16),t.NdJ("click",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.filtroOP(o))}),t._UZ(22,"nb-icon",17),t.qZA()()()()()}if(2&n){const e=t.oxw();t.xp6(5),t.Q6J("ngModel",e.selectedColecao),t.xp6(3),t.Q6J("ngForOf",e.menuColecao),t.xp6(5),t.Q6J("ngIf",e.filtroAtivo),t.xp6(7),t.Q6J("ngIf",e.filtroAtivoOp)}}const Ie=function(n){return["/auditor/descricao/",n]};function ye(n,s){if(1&n&&(t.TgZ(0,"div"),t._UZ(1,"fc-card",24),t.qZA()),2&n){const e=s.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("show_desc",i.show_desc)("title",e.name)("qnt_ops",e.qnt)("c_status",e.color)("qnt_atraso",e.qnt_atraso)("per_atraso",e.per_atraso)("routerLink",t.VKq(7,Ie,e.id))}}function Le(n,s){if(1&n&&(t.TgZ(0,"div")(1,"div",23),t.YNc(2,ye,2,9,"div",4),t.ALo(3,"async"),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",t.lcZ(3,1,e.faccaoList$))}}function Ne(n,s){1&n&&(t.TgZ(0,"h4",25),t._uU(1,"Nenhum item encontrado.."),t.qZA())}let Ue=(()=>{class n{constructor(e,i,o,a){this._setTitle=e,this._opsService=i,this._opsFilteredService=o,this._userService=a,this.selectedColecao=[],this.menuColecao=[],this.selectedFilters={origem:"",colecao:this.selectedColecao,apontamentoFilter:""},this.loading=new f.X(!0),this.emptyList=new f.X(!1),this.filtroAtivo=!1,this.filtroAtivoOp=!1,this.show_desc=!0,this.color=["info","warning","primary","success"],this.localList=[],this.AllOpsList=[],this.AllOpsList2=[],this.faccaoList=[],this.faccaoList$=new f.X(this.faccaoList)}ngOnInit(){this.selectedFilters={origem:"",colecao:[],apontamentoFilter:""},this._opsFilteredService.clearFilter();let e=99==this._userService.getNivel()?1:this._userService.getNivel(),i=T.i[e].charAt(0).toUpperCase()+T.i[e].slice(1);this._opsFilteredService.setFilter(this.selectedFilters),this._setTitle.setTitle("Carregando..."),this.subscription=this._opsService.getOPsRegiao().subscribe({next:o=>{this.AllOpsList=JSON.parse(o.data),this.setfaccaolist(this.AllOpsList),this.faccaoList.forEach(a=>{this.menuColecao.push(a.ciclo+"-"+a.colecao),a.name=a.name.replace("EXT. ","")}),this.menuColecao=[...new Set(this.menuColecao)],this.menuColecao.sort((a,c)=>+a.split("-")[0]>+c.split("-")[0]?1:+c.split("-")[0]>+a.split("-")[0]?-1:0),this.faccaoList$.next(this.faccaoList),this._setTitle.setTitle(i),this.loading.next(!1),this.emptyList.next(!this.faccaoList.length)},error:o=>{console.error(o),this.loading.next(!1),this.emptyList.next(!this.faccaoList.length)}})}setfaccaolist(e){this.faccaoList=[],this.localList=e.flatMap(p=>p.DS_LOCAL);let i=[...new Set(this.localList)].filter(p=>""!==p),o=this.localList.reduce((p,l)=>(p[l]=(p[l]||0)+1,p),{}),a=0,c=0,_=0,d="";i.map((p,l)=>{a=e.find(m=>m.DS_LOCAL==p)?.CD_LOCAL,c=e.filter(m=>"Em atraso"==m.Status&&m.DS_LOCAL==p).length,_=c/o[p],d=_>=.5?"danger":_>=.01?"warning":"info",this.faccaoList.push({id:a,name:p,qnt:o[p],qnt_atraso:c,per_atraso:Math.floor(100*_),qnt_pecas:0,ciclo:e.find(m=>m.DS_LOCAL==p)?.NR_CICLO+"",colecao:e.find(m=>m.DS_LOCAL==p)?.DS_CICLO,color:d})}),this.faccaoList.sort((p,l)=>p.qnt<l.qnt?1:l.qnt<p.qnt?-1:0),this.faccaoList$.next(this.faccaoList)}filtroFaccao(e){document.getElementById("filtro")?.focus();const i=e.target.value;if(i){this.filtroAtivo=!0,this.faccaoList$.next(this.faccaoList.filter(a=>a.name.includes(i.toUpperCase())));const o=this.faccaoList$.subscribe(a=>this.emptyList.next(!a.length));this.subscription.add(o)}else this.faccaoList$.next(this.faccaoList),this.filtroAtivo=!1}filtroOP(e){document.getElementById("filtro-op")?.focus(),this.filtroAtivoOp=!0;const i=e.target.value,o=this.AllOpsList.filter(a=>a.CD_REFERENCIA.includes(i));this._opsFilteredService.setFilterRef(i),this.setfaccaolist(o)}limpaFiltro(e){this.filtroAtivo=!1,this.filtroAtivoOp=!1,e.value="",this.setfaccaolist(this.AllOpsList)}filtrosDropdown(){let e=this.selectedColecao.map(o=>o.split("-")[0]);this.selectedFilters={origem:"",colecao:e,apontamentoFilter:""},this._opsFilteredService.setFilter(this.selectedFilters);let i=this.AllOpsList;if(this.selectedColecao.length>0)return i=this.AllOpsList.filter(o=>e.includes(o.NR_CICLO+"")),void this.setfaccaolist(i);this.setfaccaolist(i)}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(S.H),t.Y36(I.W),t.Y36(H.C),t.Y36(M.K))},n.\u0275cmp=t.Xpm({type:n,selectors:[["fc-list-faccao"]],decls:10,vars:8,consts:[[4,"ngIf","ngIfElse"],["allOPs",""],["listaVazia",""],[1,"card-wrapper","loading"],[4,"ngFor","ngForOf"],[3,"loading","title","qnt_ops","c_status","qnt_atraso","show_desc"],[1,"filter-wrapper"],[1,"filter-title"],[1,"filter-menu-wrapper"],[1,"filtro-dropdown"],["multiple","","placeholder","Cole\xe7\xe3o","status","primary",3,"ngModel","ngModelChange"],[3,"click"],["style","font-size: 12px !important;",3,"value","click",4,"ngFor","ngForOf"],["type","text","id","filtro","nbInput","","placeholder","Filtrar fac\xe7\xe3o",3,"keyup"],["filtro",""],["nbPrefix","","nbButton","","ghost","",3,"click",4,"ngIf"],["nbSuffix","","nbButton","","ghost","",3,"click"],["icon","search-outline","aria-label","pesquisar"],["type","text","id","filtro-op","nbInput","","placeholder","Filtrar Refer\xeancia",3,"keyup"],["filtroOp",""],[2,"font-size","12px !important",3,"value","click"],["nbPrefix","","nbButton","","ghost","",3,"click"],["icon","close-square-outline","aria-label","pesquisar"],[1,"card-wrapper"],["text_desc","OP's em atraso",3,"show_desc","title","qnt_ops","c_status","qnt_atraso","per_atraso","routerLink"],[2,"text-align","center"]],template:function(e,i){if(1&e&&(t.TgZ(0,"nb-layout")(1,"nb-layout-column"),t.YNc(2,Se,3,1,"div",0),t.ALo(3,"async"),t.YNc(4,Ee,23,4,"ng-template",null,1,t.W1O),t.YNc(6,Le,4,3,"div",0),t.ALo(7,"async"),t.YNc(8,Ne,2,0,"ng-template",null,2,t.W1O),t.qZA()()),2&e){const o=t.MAs(5),a=t.MAs(9);t.xp6(2),t.Q6J("ngIf",t.lcZ(3,4,i.loading))("ngIfElse",o),t.xp6(4),t.Q6J("ngIf",!t.lcZ(7,6,i.emptyList))("ngIfElse",a)}},dependencies:[b.rH,g.sg,g.O5,h.JJ,h.On,Te.A,r.DPz,r.fMN,r.h8i,r.jBG,r.t3q,r.yyc,r.Aqw,r.dP_,r.rs,r.q51,g.Ov],styles:["nb-layout-column[_ngcontent-%COMP%]{padding:0!important}.card-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}.loading[_ngcontent-%COMP%]{margin-top:20px!important}.filter-wrapper[_ngcontent-%COMP%]{margin:35px 15px 0;padding:10px;border:1px solid lightblue;border-radius:5px;background-color:var(--background-basic-color-2)}.filter-wrapper[_ngcontent-%COMP%]   .filter-title[_ngcontent-%COMP%]{font-weight:600;margin-top:-20px;background:linear-gradient(0deg,var(--background-basic-color-2) 0%,var(--background-basic-color-2) 55%,rgba(255,255,255,0) 55%,rgba(255,255,255,0) 100%);width:max-content;padding:0 5px;-webkit-user-select:none;user-select:none}.filter-wrapper[_ngcontent-%COMP%]   .filter-menu-wrapper[_ngcontent-%COMP%]{margin-left:2em;display:flex;flex-wrap:wrap;align-items:center}.filter-wrapper[_ngcontent-%COMP%]   .filtro-dropdown[_ngcontent-%COMP%]{margin-right:15px}  nb-select{width:275px}.list-viewport[_ngcontent-%COMP%]{margin-top:20px;height:500px}@media screen and (max-width: 475px){.filter-wrapper[_ngcontent-%COMP%]{margin:20px 0}.filter-menu-wrapper[_ngcontent-%COMP%]{margin:0!important;justify-content:center}.filtro-dropdown[_ngcontent-%COMP%]{margin:0 0 10px!important}.list-viewport[_ngcontent-%COMP%]{height:700px}}@media screen and (min-height: 900px){.list-viewport[_ngcontent-%COMP%]{height:800px}}*[_ngcontent-%COMP%]{scrollbar-width:auto;scrollbar-color:#bdbdbd #ffffff}*[_ngcontent-%COMP%]::-webkit-scrollbar{width:9px}*[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#bdbdbd;border-radius:10px}"],changeDetection:0}),n})();function qe(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"nb-option",20),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.filtroDropdown())}),t._uU(1),t.qZA()}if(2&n){const e=s.$implicit;t.Q6J("value",s.index),t.xp6(1),t.hij("",e," ")}}function Fe(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",35),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,a=t.oxw(3);return t.KtG(a.confirmarRecebimento(o))}),t.TgZ(1,"a"),t._uU(2,"Marcar como Recebido"),t.qZA()()}}function Re(n,s){1&n&&(t.TgZ(0,"div",36)(1,"span"),t._uU(2,"Aguardando confirma\xe7\xe3o de envio."),t.qZA()())}function ke(n,s){if(1&n&&(t.ynx(0),t.TgZ(1,"tr")(2,"td",24),t._uU(3),t.qZA(),t.TgZ(4,"td",25),t._uU(5),t.qZA(),t.TgZ(6,"td",26),t._uU(7),t.qZA(),t.TgZ(8,"td",27),t._uU(9),t.qZA(),t.TgZ(10,"td",28),t._uU(11),t.qZA(),t.TgZ(12,"td",29)(13,"nb-alert",30),t._uU(14),t.qZA()(),t.TgZ(15,"td",31),t._uU(16),t.qZA(),t.TgZ(17,"td",32),t.YNc(18,Fe,3,0,"div",33),t.YNc(19,Re,3,0,"ng-template",null,34,t.W1O),t.qZA()(),t._UZ(21,"hr"),t.BQk()),2&n){const e=s.$implicit,i=t.MAs(20);t.xp6(3),t.Oqu(e.NR_CICLO+"-"+e.NR_OP+"-"+e.CD_REFERENCIA),t.xp6(2),t.Oqu(e.DS_CLASSIFICACAO),t.xp6(2),t.Oqu(e.display_name),t.xp6(2),t.Oqu(e.QT_SOLICITADO),t.xp6(2),t.Oqu(e.DT_SOLICITACAO),t.xp6(2),t.Q6J("ngClass",e.DS_STATUS_PENDENCIA),t.xp6(1),t.Oqu(e.DS_STATUS_PENDENCIA),t.xp6(2),t.Oqu(e.OBS),t.xp6(2),t.Q6J("ngIf","Enviado"==e.DS_STATUS_PENDENCIA)("ngIfElse",i)}}function Je(n,s){if(1&n&&(t.ynx(0),t.TgZ(1,"nb-card",23),t.ALo(2,"async"),t.TgZ(3,"nb-card-header")(4,"h4"),t._uU(5),t.qZA()(),t.TgZ(6,"nb-card-body")(7,"table",17)(8,"tr")(9,"th"),t._uU(10,"C\xf3d. OP"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Classifica\xe7\xe3o"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Mat\xe9ria Prima"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Qtd. Solicitada"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Data Solicita\xe7\xe3o"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"Status"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"Observa\xe7\xf5es"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"Confirmar Recebimento"),t.qZA()(),t.YNc(25,ke,22,10,"ng-container",22),t.qZA()()(),t.BQk()),2&n){const e=s.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("nbSpinner",!t.lcZ(2,3,i.loadingSend)),t.xp6(4),t.Oqu(e.local),t.xp6(20),t.Q6J("ngForOf",e.pendencias)}}function Qe(n,s){if(1&n&&(t.ynx(0),t.TgZ(1,"div",21),t.YNc(2,Je,26,5,"ng-container",22),t.ALo(3,"async"),t.qZA(),t.BQk()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",t.lcZ(3,1,e.minhasPendenciasLocal$))}}function Ye(n,s){1&n&&(t.ynx(0),t.TgZ(1,"tr")(2,"th"),t._uU(3,"C\xf3d. OP"),t.qZA(),t.TgZ(4,"th"),t._uU(5,"Classifica\xe7\xe3o"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Mat\xe9ria Prima"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Qtd. Solicitada"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Usu\xe1rio Solicitante"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Data Solicita\xe7\xe3o"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Status"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Observa\xe7\xf5es"),t.qZA()(),t.TgZ(18,"tr")(19,"td",24),t._uU(20,"..."),t.qZA(),t.TgZ(21,"td",25),t._uU(22,"..."),t.qZA(),t.TgZ(23,"td",26),t._uU(24,"..."),t.qZA(),t.TgZ(25,"td",27),t._uU(26,"..."),t.qZA(),t.TgZ(27,"td",28),t._uU(28,"..."),t.qZA(),t.TgZ(29,"td",29),t._uU(30,"..."),t.qZA(),t.TgZ(31,"td",31),t._uU(32,"..."),t.qZA(),t.TgZ(33,"td",32),t._uU(34," ... "),t.qZA()(),t._UZ(35,"hr"),t.BQk())}function He(n,s){1&n&&(t.TgZ(0,"tr")(1,"td",37)(2,"h4"),t._uU(3,"Nenhum item encontrado!"),t.qZA()()())}function $e(n,s){if(1&n&&(t.YNc(0,He,4,0,"tr",15),t.ALo(1,"async")),2&n){const e=t.oxw();t.Q6J("ngIf",t.lcZ(1,1,e.isEmptyList))}}let je=(()=>{class n{constructor(e,i,o,a,c){this.toastrService=e,this._setTituloService=i,this._userService=o,this._pendenciaService=a,this._opsService=c,this.ignoredStatus=["Finalizado","Recusado"],this.loadingError=!1,this.isEmptyList=new f.X(!0),this.loading=new f.X(!0),this.loadingSend=new f.X(!0),this.localEnum=[],this.selectedLocal=[],this.idSelectedLocal=[],this.minhasPendencias=[],this.minhasPendenciasLocal=[],this.minhasPendencias$=new f.X([]),this.minhasPendenciasLocal$=new f.X([])}ngOnInit(){this._setTituloService.setTitle("Carregando..."),this.isEmptyList.next(!1);let e=0;this._userService.getUser().subscribe(i=>e=i.CD_USUARIO),this._pendenciaService.listPendencia(e,1).subscribe({next:i=>{this.minhasPendencias=JSON.parse(i.data),this.minhasPendencias=this.minhasPendencias.filter(a=>!this.ignoredStatus.includes(a.DS_STATUS_PENDENCIA)),this.minhasPendencias.forEach(a=>{a.display_name=a.CORTE?a.CD_PRODUTO_MP+" - "+a.DS_PRODUTO_MP+" - "+a.CORTE:a.CD_PRODUTO_MP+" - "+a.DS_PRODUTO_MP;let c=new Date(a.DT_SOLICITACAO);a.DT_SOLICITACAO=new Date(c).toLocaleString("pt-Br",{timeZone:"UTC"}),a.cod=a.NR_CICLO+"-"+a.NR_OP+"-"+a.CD_REFERENCIA,this.minhasPendenciasLocal.length>0&&this.minhasPendenciasLocal.filter(_=>_.local==a.CD_LOCAL+" - "+a.DS_LOCAL).length?this.minhasPendenciasLocal.filter(_=>_.local==a.CD_LOCAL+" - "+a.DS_LOCAL)[0].pendencias.push(a):this.minhasPendenciasLocal.push({local:a.CD_LOCAL+" - "+a.DS_LOCAL,pendencias:[a]})});let o=this.minhasPendenciasLocal.flatMap(a=>a.local);this.localEnum=Array.from(new Set(o)),this.isEmptyList.next(!this.minhasPendenciasLocal.length),this.minhasPendenciasLocal$.next(this.minhasPendenciasLocal),this._setTituloService.setTitle("Minhas Pend\xeancias"),this.loading.next(!1)},error:i=>{console.error(i),this.isEmptyList.next(!0),this.loading.next(!1)}})}filtroOP(e){this.idSelectedLocal=[],document.getElementById("filtro-op")?.focus();const i=e.target.value;this.minhasPendenciasLocal$.next(this.minhasPendenciasLocal);let o=this.minhasPendenciasLocal;i.length>0&&(o=this.minhasPendenciasLocal.map(a=>({...a,pendencias:a.pendencias.filter(_=>_.cod?.includes(i))})),o=o.filter(a=>a.pendencias.length>0),this.orderByQntPendencia(o),this.minhasPendenciasLocal$.next(o))}filtroDropdown(){if(document.getElementById("filtro-op").value="",this.selectedLocal=[],this.idSelectedLocal.forEach(e=>{this.selectedLocal.push(this.localEnum[e])}),this.minhasPendenciasLocal$.next(this.minhasPendenciasLocal),this.selectedLocal.length>0){let e=this.minhasPendenciasLocal.filter(i=>this.selectedLocal.includes(i.local));e=e.filter(i=>i.pendencias.length>0),this.orderByQntPendencia(e),this.minhasPendenciasLocal$.next(e)}}orderByQntPendencia(e){e.sort((i,o)=>i.pendencias.length<o.pendencias.length?1:o.pendencias.length<i.pendencias.length?-1:0)}confirmarRecebimento(e){this.isEmptyList.next(!0),this.loadingSend.next(!1),this.loading.next(!0),e.MODIFICADO_POR=this._userService.getSession().nome;let i=e.CD_USUARIO;e.CD_USUARIO=this._userService.getSession().CD_USUARIO||0,e.DT_MODIFICACAO=new Date(Date.now()).toLocaleString("pt-Br"),e.CD_NovoStatus=4,e.DS_NovoStatus="Finalizado";let o=e.DT_MODIFICACAO?.split(" ");e.DT_MODIFICACAO=o[0].split("/").reverse().join("-")+" "+o[1],this._pendenciaService.editPendencia(e).subscribe({next:a=>{if(1==a){this.toastrService.success("Status atualizado!","Sucesso!!!",{preventDuplicates:!0});let c=this.minhasPendenciasLocal.find(p=>p.local.includes(e.CD_LOCAL+"")),_=c?.pendencias.findIndex(p=>p.CD_PENDENCIA==e.CD_PENDENCIA);if(c?.pendencias.splice(_,1),!(c?.pendencias.length>0)){let p=this.minhasPendenciasLocal.findIndex(l=>l.local.includes(e.CD_LOCAL+""));this.minhasPendenciasLocal.splice(p,1)}e.CD_USUARIO=i,this.minhasPendenciasLocal$.next(this.minhasPendenciasLocal),this.isEmptyList.next(!this.minhasPendenciasLocal.length),this.loadingSend.next(!0),this.loading.next(!1)}},error:a=>{console.warn(a),this.toastrService.danger("Erro ao enviar a solicita\xe7\xe3o!","Erro!!!",{preventDuplicates:!0}),this.loadingSend.next(!0),this.loading.next(!1)}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(r.quB),t.Y36(S.H),t.Y36(M.K),t.Y36(y.x),t.Y36(I.W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["fc-minhas-pendencias"]],decls:30,vars:9,consts:[[1,"body-wrapper"],[1,"historico"],["icon","book-open-outline","aria-label","historico",1,"icon-header"],["href","auditor/hist_pendencias"],[1,"filter-wrapper"],[1,"filter-title"],[1,"filter-menu-wrapper"],[1,"filter-dropdown"],["multiple","","placeholder","Local","status","primary",3,"ngModel","ngModelChange"],[3,"click"],["style","font-size: 12px !important;",3,"value","click",4,"ngFor","ngForOf"],["type","text","id","filtro-op","nbInput","","placeholder","Filtrar Ciclo, OP ou Ref",3,"keyup"],["filtro",""],["nbSuffix","","nbButton","","ghost",""],["icon","search-outline","aria-label","pesquisar"],[4,"ngIf"],[1,"table-wrapper"],[1,"rwd-table"],[4,"ngIf","ngIfElse"],["error",""],[2,"font-size","12px !important",3,"value","click"],[1,"card-wrapper"],[4,"ngFor","ngForOf"],[3,"nbSpinner"],["data-th","C\xf3d. OP"],["data-th","Classifica\xe7\xe3o"],["data-th","Mat\xe9ria Prima"],["data-th","Qtd. Solicitada"],["data-th","Data Solicita\xe7\xe3o"],["data-th","Status"],[1,"nv-alert",3,"ngClass"],["data-th","Observa\xe7\xf5es"],["data-th","Confirmar Recebimento",1,"recebido-row"],["class","nv-alert confirmar",3,"click",4,"ngIf","ngIfElse"],["aguardando",""],[1,"nv-alert","confirmar",3,"click"],[1,"aguardando-msg"],["colspan","100%",1,"error-loading"]],template:function(e,i){if(1&e&&(t.TgZ(0,"nb-layout")(1,"nb-layout-column")(2,"div",0)(3,"div",1),t._UZ(4,"nb-icon",2),t.TgZ(5,"a",3),t._uU(6,"Hist\xf3rico"),t.qZA()(),t.TgZ(7,"div",4)(8,"h6",5),t._uU(9,"Filtros"),t.qZA(),t.TgZ(10,"div",6)(11,"div",7)(12,"nb-select",8),t.NdJ("ngModelChange",function(a){return i.idSelectedLocal=a}),t.TgZ(13,"nb-option",9),t.NdJ("click",function(){return i.filtroDropdown()}),t._uU(14,"Limpar filtro"),t.qZA(),t.YNc(15,qe,2,2,"nb-option",10),t.qZA()(),t.TgZ(16,"div",7)(17,"nb-form-field")(18,"input",11,12),t.NdJ("keyup",function(a){return i.filtroOP(a)}),t.qZA(),t.TgZ(20,"button",13),t._UZ(21,"nb-icon",14),t.qZA()()()()(),t.YNc(22,Qe,4,3,"ng-container",15),t.ALo(23,"async"),t.TgZ(24,"div",16)(25,"table",17),t.YNc(26,Ye,36,0,"ng-container",18),t.ALo(27,"async"),t.YNc(28,$e,2,3,"ng-template",null,19,t.W1O),t.qZA()()()()()),2&e){const o=t.MAs(29);t.xp6(12),t.Q6J("ngModel",i.idSelectedLocal),t.xp6(3),t.Q6J("ngForOf",i.localEnum),t.xp6(7),t.Q6J("ngIf",t.lcZ(23,5,i.loadingSend)),t.xp6(4),t.Q6J("ngIf",t.lcZ(27,7,i.loading))("ngIfElse",o)}},dependencies:[g.mk,g.sg,g.O5,h.JJ,h.On,r.$9b,r.DPz,r.Asz,r.yKW,r.ndF,r.fMN,r.h8i,r.jBG,r.yyc,r.Aqw,r.dP_,r.rs,r.q51,r.Q7R,g.Ov],styles:['@charset "UTF-8";.body-wrapper[_ngcontent-%COMP%]{margin:1em}.filter-wrapper[_ngcontent-%COMP%]{margin:30px 15px 15px;padding:10px;border:1px solid lightblue;border-radius:5px;background-color:var(--background-basic-color-2)}.filter-wrapper[_ngcontent-%COMP%]   .filter-title[_ngcontent-%COMP%]{font-weight:600;margin-top:-20px;background:linear-gradient(0deg,var(--background-basic-color-2) 0%,var(--background-basic-color-2) 55%,rgba(255,255,255,0) 55%,rgba(255,255,255,0) 100%);width:max-content;padding:0 5px;-webkit-user-select:none;user-select:none}.filter-wrapper[_ngcontent-%COMP%]   .filter-menu-wrapper[_ngcontent-%COMP%]{margin-left:2em;display:flex;flex-wrap:wrap;align-items:center}.filter-wrapper[_ngcontent-%COMP%]   .filter-dropdown[_ngcontent-%COMP%]{margin-right:15px}.historico[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin:1.5em .5em .5em;font-size:1.25em}.historico[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--text-basic-color);font-weight:600}.aguardando-msg[_ngcontent-%COMP%]{text-align:center;font-size:.85em;color:var(--text-hint-color)}nb-alert[_ngcontent-%COMP%]{min-height:25px;font-size:13px;padding:1px 10px;display:inline-block;margin:5px 0 0;color:var(--color-basic-100);background:var(--color-danger-default);-webkit-user-select:none;user-select:none;text-align:center}.nv-alert[_ngcontent-%COMP%]{min-height:25px;font-size:13px;padding:1px 10px;display:inline-block;margin:5px 0 0;color:var(--color-basic-100);background:var(--color-danger-default);-webkit-user-select:none;user-select:none;text-align:center;border-radius:7px}.nv-alert[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.an\\e1lise[_ngcontent-%COMP%]{background:var(--color-warning-500)}.confirmar[_ngcontent-%COMP%]{padding:.5em;border:1px solid var(color-success-200);box-shadow:1px 1px 2px #999;background-color:var(--color-success-new)}.confirmar[_ngcontent-%COMP%]:hover{background-color:var(--color-success-500);cursor:pointer}.recebido-row[_ngcontent-%COMP%]{display:flex!important;align-items:center}.table-wrapper[_ngcontent-%COMP%]{margin:2em auto 0;width:-moz-fit-content;width:fit-content;display:flex;justify-content:center}@media (min-width: 480px){hr[_ngcontent-%COMP%]{display:none}}.rwd-table[_ngcontent-%COMP%]{margin:0;min-width:300px}.rwd-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-top:1px solid #ddd;border-bottom:1px solid #ddd}.rwd-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:1em;display:none}.rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.85em;display:block}.rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{padding-top:.5em}.rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{padding-bottom:.5em}.rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-th) ": ";font-weight:700;width:7em;display:inline-block}@media (min-width: 480px){.rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{display:none}}.rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{max-width:3.75rem}.rwd-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:left}@media (min-width: 480px){.rwd-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:table-cell;padding:.25em .5em}.rwd-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child, .rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{padding-left:0}.rwd-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child, .rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{padding-right:0}}body[_ngcontent-%COMP%]{padding:0 2em;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;color:#444;background:#eee}h1[_ngcontent-%COMP%]{font-weight:400;letter-spacing:-1px;color:#34495e}.rwd-table[_ngcontent-%COMP%]{background:var(--background-basic-color-1);color:var(--text-basic-color);font-weight:400;border-radius:.4em;overflow:hidden}.rwd-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-color:var(--background-basic-color-1)}.rwd-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{margin:.5em 1em}@media (min-width: 480px){.rwd-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1em!important}.rwd-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{max-width:4.75rem}}.rwd-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{color:var(--text-heading-table)}.error-loading[_ngcontent-%COMP%]{background-color:var(--background-basic-color-3);text-align:center!important}']}),n})();var B=u(5521);function Be(n,s){1&n&&(t.ynx(0),t.TgZ(1,"div",5)(2,"h1"),t._uU(3,"Produto n\xe3o encontrado!"),t.qZA(),t.TgZ(4,"p"),t._uU(5,"Entre em contato com o administrador..."),t.qZA()(),t.BQk())}function ze(n,s){1&n&&(t.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"h3"),t._uU(4,"Carregando..."),t.qZA()(),t.TgZ(5,"div",11)(6,"div",12)(7,"div"),t._uU(8," Refer\xeancia: "),t.qZA(),t.TgZ(9,"div",13),t._uU(10," 0 "),t.qZA()(),t.TgZ(11,"div",12)(12,"div"),t._uU(13," Ciclo-OP: "),t.qZA(),t.TgZ(14,"div",13),t._uU(15," 0 "),t.qZA()(),t.TgZ(16,"div",12)(17,"div"),t._uU(18," Qtd. Pe\xe7as: "),t.qZA(),t.TgZ(19,"div",13),t._uU(20," 0 "),t.qZA()()()(),t.TgZ(21,"div",14),t.ynx(22),t.TgZ(23,"nb-card")(24,"nb-card-header")(25,"h4"),t._uU(26,"Grupo: ..."),t.qZA()(),t.TgZ(27,"nb-card-body")(28,"table",15)(29,"tr")(30,"th"),t._uU(31,"C\xf3d. Produto"),t.qZA(),t.TgZ(32,"th"),t._uU(33,"Produto"),t.qZA(),t.TgZ(34,"th"),t._uU(35,"Tamanho"),t.qZA(),t.TgZ(36,"th"),t._uU(37,"Solicita\xe7\xe3o"),t.qZA()(),t.TgZ(38,"tr")(39,"td",16),t._uU(40,"0"),t.qZA(),t.TgZ(41,"td",17),t._uU(42,"..."),t.qZA(),t.TgZ(43,"td",18),t._uU(44,"..."),t.qZA(),t.TgZ(45,"td",19),t._UZ(46,"input",20),t.qZA(),t._UZ(47,"hr"),t.qZA()()()(),t.BQk(),t.qZA()())}function Ke(n,s){1&n&&(t.TgZ(0,"th"),t._uU(1,"Parte do Corte"),t.qZA())}function We(n,s){if(1&n&&(t.TgZ(0,"td",35),t._UZ(1,"input",36),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("id",e.CD_MATERIAL+"_corte")}}function Ge(n,s){if(1&n&&(t.TgZ(0,"nb-option",37),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",s.index),t.xp6(1),t.hij("",e," ")}}function Ve(n,s){if(1&n&&(t.ynx(0),t.TgZ(1,"tr")(2,"td",16),t._uU(3),t.qZA(),t.TgZ(4,"td",17),t._uU(5),t.qZA(),t.YNc(6,We,2,1,"td",29),t.TgZ(7,"td",30)(8,"nb-select",31),t.YNc(9,Ge,2,2,"nb-option",32),t.qZA()(),t.TgZ(10,"td",33),t._UZ(11,"input",34),t.qZA(),t._UZ(12,"hr"),t.qZA(),t.BQk()),2&n){const e=s.$implicit,i=s.index,o=t.oxw().$implicit,a=t.oxw(3);t.xp6(3),t.Oqu(e.CD_MATERIAL),t.xp6(2),t.Oqu(e.DS_MATERIAL),t.xp6(1),t.Q6J("ngIf","TECIDO"==o.DS_PRODUCT_CLASSIFICATION),t.xp6(2),t.Q6J("id",e.CD_MATERIAL+"_tamanho"),t.xp6(1),t.Q6J("ngForOf",e.DS_TAMANHO),t.xp6(1),t.Q6J("id",i),t.xp6(1),t.Q6J("id",e.CD_MATERIAL+"-"+e.DS_MATERIAL)("max",a.opsData.QT_OP)}}function Xe(n,s){if(1&n&&(t.ynx(0),t.TgZ(1,"nb-card")(2,"nb-card-header")(3,"h4"),t._uU(4),t.qZA()(),t.TgZ(5,"nb-card-body")(6,"table",27)(7,"tr")(8,"th"),t._uU(9,"C\xf3d. Produto"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Produto"),t.qZA(),t.YNc(12,Ke,2,0,"th",28),t.TgZ(13,"th"),t._uU(14,"Tamanho da pe\xe7a"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Solicita\xe7\xe3o"),t.qZA()(),t.YNc(17,Ve,13,8,"ng-container",23),t.qZA()()(),t.BQk()),2&n){const e=s.$implicit;t.xp6(4),t.Oqu(e.DS_PRODUCT_CLASSIFICATION),t.xp6(8),t.Q6J("ngIf","TECIDO"==e.DS_PRODUCT_CLASSIFICATION),t.xp6(5),t.Q6J("ngForOf",e.mp_list)}}function tn(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",21)(1,"div",10)(2,"h3"),t._uU(3),t.qZA()(),t.TgZ(4,"div",11)(5,"div",12)(6,"div"),t._uU(7," Refer\xeancia: "),t.qZA(),t.TgZ(8,"div",13),t._uU(9),t.qZA()(),t.TgZ(10,"div",12)(11,"div"),t._uU(12," Ciclo-OP: "),t.qZA(),t.TgZ(13,"div",13),t._uU(14),t.qZA()(),t.TgZ(15,"div",12)(16,"div"),t._uU(17," Qtd. Pe\xe7as: "),t.qZA(),t.TgZ(18,"div",13),t._uU(19),t.qZA()()()(),t.TgZ(20,"div",22),t.YNc(21,Xe,18,3,"ng-container",23),t.ALo(22,"async"),t.TgZ(23,"h4")(24,"b"),t._uU(25,"Observa\xe7\xf5es:"),t.qZA()(),t.TgZ(26,"textarea",24),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw(2);return t.KtG(a.obsValue=o)}),t.qZA(),t.TgZ(27,"button",25),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.enviar())}),t._uU(28,"Enviar"),t.qZA(),t.TgZ(29,"button",26),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.limparForm())}),t._uU(30,"Limpar"),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(3),t.Oqu(e.opsData.DS_GRUPO),t.xp6(6),t.hij(" ",e.opsData.CD_REFERENCIA," "),t.xp6(5),t.hij(" ",e.cicloOP," "),t.xp6(5),t.hij(" ",e.opsData.QT_OP," "),t.xp6(2),t.Q6J("ngForOf",t.lcZ(22,10,e.materiasPrimasList$)),t.xp6(5),t.Q6J("ngModel",e.obsValue),t.xp6(1),t.Q6J("nbSpinner",e.loading.getValue())("disabled",e.loading.getValue()),t.xp6(2),t.Q6J("nbSpinner",e.loading.getValue())("disabled",e.loading.getValue())}}function en(n,s){if(1&n&&(t.YNc(0,ze,48,0,"div",6),t.ALo(1,"async"),t.YNc(2,tn,31,12,"ng-template",null,7,t.W1O)),2&n){const e=t.MAs(3),i=t.oxw();t.Q6J("ngIf",t.lcZ(1,2,i.loading))("ngIfElse",e)}}const nn=[{path:"",component:Ue},{path:"descricao/:id",component:fe},{path:"pendencias/:cod",component:(()=>{class n{constructor(e,i,o,a,c,_,d,p,l,m,A){this.cd=e,this.NbDdialogService=i,this.toastrService=o,this._route=a,this._router=c,this._location=_,this._setTitulo=d,this._userService=p,this._opService=l,this._pendenciaService=m,this._datatableConstants=A,this.positions=r.fe3,this.regSanitizer=/<(?:[^>=]|='[^']*'|=\"[^\"]*\"|=[^'\"][^\\s>]*)*>|(%3c)|%3e/g,this.loading=new f.X(!0),this.loadingError=!1,this.naoEncontrado=new f.X(!1),this.materiasPrimasList=[],this.materiasPrimasList$=new f.X([]),this.obsValue="",this.tamanhoList=[],this.solicitacao=[],this.inputList=[],this.materiasPrimas=[],this.loggedUser="",this.cd_user=0,this.titulo="Pend\xeancias",this.cdLocal="",this.codOp="0",this.cicloOP="0",this.nr_reduzido="0"}ngOnInit(){this._setTitulo.setTitle("Nova Solicita\xe7\xe3o"),this.cd_user=this._userService.getSession().CD_USUARIO,this.verificaAcesso(),this.codOp=this._route.snapshot.paramMap.get("cod"),this.nr_reduzido=this.codOp.split("-")[0],this.cdLocal=this.codOp.split("-")[1]}ngAfterContentInit(){this._opService.getOpById(this.nr_reduzido,this.cdLocal).subscribe({next:e=>{this.opsData=JSON.parse(e.data)[0],this.cicloOP=this.opsData.NR_CICLO+"-"+this.opsData.NR_OP},error:e=>{console.warn(e)}}),this._pendenciaService.listMateriaPrima(this.codOp).subscribe({next:e=>{let i=JSON.parse(e.data);try{i.map(o=>{o.mp_list.forEach(a=>{a.DS_TAMANHO=a.DS_MATERIAL_SIZE?.toString().split(", ")})}),i.filter(o=>{"EMBALAGEM"==o.DS_PRODUCT_CLASSIFICATION&&(this.tamanhoList=o.mp_list[0].DS_TAMANHO)}),this.materiasPrimas=i.flatMap(o=>o.mp_list),this.materiasPrimasList=i,this.materiasPrimasList$.next(this.materiasPrimasList),this.loading.next(!1),this.cd.detectChanges()}catch{throw this.naoEncontrado.next(!0),"Pe\xe7a n\xe3o encontrada"}}})}enviar(){if(this.loading.next(!0),this.obsValue=this.obsValue.replace(this.regSanitizer,""),this.materiasPrimas.forEach(a=>{let c=a.CD_MATERIAL.toString()+"-"+a.DS_MATERIAL,_=document.getElementById(c),d=parseInt(_.value);if(d>this.opsData.QT_OP)throw this.toastrService.warning("A quantidade n\xe3o pode ser maior que a OP","Aten\xe7\xe3o!!!",{preventDuplicates:!0}),this.loading.next(!1),"Erro quantidade!";d&&this.inputList.push({id:c,qnt:d})}),!this.inputList.length)return this.toastrService.warning("Preencha a quantidade solicitada!","Aten\xe7\xe3o!!!",{preventDuplicates:!0}),void this.loading.next(!1);let e="",i="",o=0;this.materiasPrimasList.forEach(a=>{let c=a.DS_PRODUCT_CLASSIFICATION,_=(new Date).toLocaleString("pt-Br").split(" "),d=_[0].split("/").reverse().join("-")+" "+_[1];a.mp_list.forEach(p=>{let l=p.CD_MATERIAL.toString(),m=l+"-"+p.DS_MATERIAL;e="",i="",o=0;let C="";document.getElementById(l+"_corte")&&(C=document.getElementById(l+"_corte").value,C=C.replace(this.regSanitizer,""));let P=document.getElementById(l+"_tamanho").children[0].children[0];"P/M/G"!=P.innerHTML.substring(0,5)&&(i=P.innerHTML.split(" ")[0]),""!=i&&(o=this.inputList.find(O=>O.id==m)?.qnt||0,e=this.inputList.find(O=>O.id==m)?.id||"",o>0&&""!=i&&""!=e&&this.solicitacao.push({NR_REDUZIDOOP:this.opsData.NR_REDUZIDOOP,CD_LOCAL:parseInt(this.cdLocal),NR_CICLO:this.opsData.NR_CICLO,NR_OP:this.opsData.NR_OP,CD_REFERENCIA:parseInt(this.opsData.CD_REFERENCIA),DS_CLASSIFICACAO:c,CD_PRODUTO_MP:parseInt(l),DS_PRODUTO_MP:p.DS_MATERIAL,TAMANHO:i,QT_SOLICITADO:o,CD_USUARIO:this.cd_user,DS_USUARIO:this.loggedUser,DT_SOLICITACAO:d,CD_STATUS_PENDENCIA:1,DS_STATUS_PENDENCIA:"Em an\xe1lise",OBS:this.obsValue,CORTE:C,QT_OP:this.opsData.QT_OP}))})}),this.solicitacao.length<1?this.toastrService.warning("Alguns itens est\xe3o incorretos!","Aten\xe7\xe3o!!!",{preventDuplicates:!0}):(this.NbDdialogService.open(B.z,{context:{title:"Motivo da Pend\xeancia",bodyText:"",buttonName:"Enviar",solicitacao:this.solicitacao,tipo:1}}).onClose.subscribe({next:a=>{a?(this.NbDdialogService.open(B.z,{context:{title:"Itens Enviados",bodyText:a.map(c=>"<p>"+c+"</p>").toLocaleString().replace(",","<hr>"),buttonName:"Ok",tipo:2}}),this.toastrService.success("Item enviado com sucesso!","Sucesso!",{preventDuplicates:!0}),this.limparForm(!0)):this.toastrService.warning("Erro ao enviar solicita\xe7\xe3o!","Aten\xe7\xe3o!!!",{preventDuplicates:!0})},error:a=>{console.error("Erro ao enviar")}}),this.loading.next(!1))}limparForm(e){this.loading.next(!0),this.obsValue="",e||this.toastrService.warning("Formul\xe1rio limpo!","Aten\xe7\xe3o!",{preventDuplicates:!0}),this.inputList=[],this.solicitacao=[],setTimeout(()=>this.loading.next(!1),100)}verificaAcesso(){let e=this._userService.getNivel(),i=this._userService.getSession().login||"";0==this._datatableConstants.getUsuariosPendencias().length&&this._pendenciaService.getUsuariosPendencias().subscribe({next:o=>{this._datatableConstants.setUsuariosPendencias(o),"auditor"!=T.i[e]&&!o.includes(i)&&this._router.navigate(["login"])},error:o=>{throw new Error(o)}}),"auditor"!=T.i[e]&&!this._datatableConstants.getUsuariosPendencias().includes(i)&&this._router.navigate(["login"])}voltar(){this._location.back()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.sBO),t.Y36(r.Gln),t.Y36(r.quB),t.Y36(b.gz),t.Y36(b.F0),t.Y36(g.Ye),t.Y36(S.H),t.Y36(M.K),t.Y36(I.W),t.Y36(y.x),t.Y36($.r))},n.\u0275cmp=t.Xpm({type:n,selectors:[["fc-pendencia"]],decls:10,vars:4,consts:[[1,"body-wrapper"],[1,"bt-voltar-wrapper"],["nbButton","","outline","","status","primary","size","small",1,"bt-voltar",3,"click"],[4,"ngIf","ngIfElse"],["insumos",""],[1,"nao_encontrado"],["class","loading",4,"ngIf","ngIfElse"],["mptemplate",""],[1,"loading"],[1,"toolbar-wrapper","loading"],[1,"titulo"],[1,"toolbar-info"],[1,"toolbar-value"],[1,"h6"],[1,"card-wrapper","loading"],[1,"rwd-table","loading"],["data-th","C\xf3d. Produto"],["data-th","Produto"],["data-th","Tamanho"],["data-th","Solicita\xe7\xe3o"],["nbInput","","status","warning","type","number","min","0","placeholder","0",1,"solicitado-input"],[1,"toolbar-wrapper"],[1,"card-wrapper"],[4,"ngFor","ngForOf"],["nbInput","","fullWidth","","status","warning","type","text","rows","4","id","observacoes",1,"txt-area",3,"ngModel","ngModelChange"],["nbSpinnerStatus","info","nbButton","","shape","round","status","success","type","submit","id","'bt-send",1,"bt-send",3,"nbSpinner","disabled","click"],["nbSpinnerStatus","info","nbButton","","shape","round","status","warning","type","reset","id","'bt-clear",1,"bt-clear",3,"nbSpinner","disabled","click"],[1,"rwd-table"],[4,"ngIf"],["data-th","corte",4,"ngIf"],["data-th","Tamanho da pe\xe7a"],["placeholder","P/M/G","status","warning",1,"tamanho-input",3,"id"],[3,"value",4,"ngFor","ngForOf"],["data-th","Solicita\xe7\xe3o",3,"id"],["nbInput","","status","warning","type","number","min","0","placeholder","0","required","",1,"solicitado-input",3,"id","max"],["data-th","corte"],["nbInput","","status","warning","type","text","placeholder","Parte do corte desejado","required","",1,"corte-input",3,"id"],[3,"value"]],template:function(e,i){if(1&e&&(t.TgZ(0,"nb-layout")(1,"nb-layout-column")(2,"div",0)(3,"div",1)(4,"button",2),t.NdJ("click",function(){return i.voltar()}),t._uU(5," Voltar "),t.qZA()(),t.YNc(6,Be,6,0,"ng-container",3),t.ALo(7,"async"),t.YNc(8,en,4,4,"ng-template",null,4,t.W1O),t.qZA()()()),2&e){const o=t.MAs(9);t.xp6(6),t.Q6J("ngIf",t.lcZ(7,2,i.naoEncontrado))("ngIfElse",o)}},dependencies:[g.sg,g.O5,h.Fj,h.JJ,h.On,r.DPz,r.Asz,r.yKW,r.ndF,r.h8i,r.Aqw,r.dP_,r.rs,r.q51,r.Q7R,g.Ov],styles:['.loading[_ngcontent-%COMP%]{background-color:var(--background-basic-color-2)!important}.body-wrapper[_ngcontent-%COMP%]{margin:20px}.bt-voltar-wrapper[_ngcontent-%COMP%]{margin:1em 0;display:flex;justify-content:flex-end}.bt-voltar[_ngcontent-%COMP%]:hover{background-color:#b3b3b3}.titulo[_ngcontent-%COMP%]{min-width:18em;margin:0 1em;font-family:Trebuchet MS,Lucida Sans Unicode,Lucida Grande,Lucida Sans,Arial,sans-serif!important;text-align:center}.titulo[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:500}nb-layout-column[_ngcontent-%COMP%]{padding:0!important}.toolbar-wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;flex-direction:column;align-items:center;flex:1;background-color:var(--input-basic-background-color);justify-content:space-around;padding:.75rem 1rem .5rem;border:1px solid var(--background-basic-color-3);border-right:none;border-left:none;border-radius:15px}.toolbar-info[_ngcontent-%COMP%]{display:flex;max-width:25em;justify-content:space-between;align-items:center;margin-top:10px}.toolbar-value[_ngcontent-%COMP%]{margin:0 10px;text-align:center}.toolbar-value[_ngcontent-%COMP%]   .h6[_ngcontent-%COMP%]{font-size:1.125rem;font-family:Open Sans,sans-serif;font-weight:700;line-height:1.5rem}.card-wrapper[_ngcontent-%COMP%]{margin:20px auto auto;max-width:800px;display:flex;justify-content:center;flex-wrap:wrap}nb-card-body[_ngcontent-%COMP%]{padding:.75rem!important}.bt-send[_ngcontent-%COMP%]{position:fixed;bottom:2rem;right:8rem}.bt-clear[_ngcontent-%COMP%]{position:fixed;bottom:2rem;right:2rem}.txt-area[_ngcontent-%COMP%]{margin-bottom:4rem}nb-select[_ngcontent-%COMP%]     .select-button{min-width:7em!important}.nao_encontrado[_ngcontent-%COMP%]{text-align:center}.rwd-table[_ngcontent-%COMP%]{margin:0;min-width:300px}.rwd-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-top:1px solid #ddd;border-bottom:1px solid #ddd}.rwd-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{display:none}.rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:block}.rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{padding-top:.5em}.rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{padding-bottom:.5em}.rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-th) ": ";font-weight:700;width:6.5em;display:inline-block}@media (min-width: 560px){.rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{display:none}}.rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .solicitado-input[_ngcontent-%COMP%], .rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .tamanho-input[_ngcontent-%COMP%]{max-width:3.75rem}.rwd-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:left}@media (min-width: 560px){.rwd-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:table-cell;padding:.25em .5em}.rwd-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child, .rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{padding-left:0}.rwd-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child, .rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{padding-right:0}}body[_ngcontent-%COMP%]{padding:0 2em;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;color:#444;background:#eee}h1[_ngcontent-%COMP%]{font-weight:400;letter-spacing:-1px;color:#34495e}.rwd-table[_ngcontent-%COMP%]{background:var(--background-basic-color-1);color:var(--text-basic-color);font-weight:400;border-radius:.4em;overflow:hidden}.rwd-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-color:var(--background-basic-color-1)}.rwd-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{margin:.5em 1em}@media (min-width: 560px){.rwd-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1em!important}.rwd-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .solicitado-input[_ngcontent-%COMP%], .rwd-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .tamanho-input[_ngcontent-%COMP%], .rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .solicitado-input[_ngcontent-%COMP%], .rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .tamanho-input[_ngcontent-%COMP%]{max-width:4.75rem}.rwd-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .corte-input[_ngcontent-%COMP%], .rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .corte-input[_ngcontent-%COMP%]{max-width:20em}}.rwd-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .rwd-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{color:var(--text-heading-table)}']}),n})()},{path:"minhas_pendencias",component:je},{path:"hist_pendencias",component:xe}];let on=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[b.Bz.forChild(nn),b.Bz]}),n})(),an=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[{provide:w.sN,useClass:w.TD}],imports:[b.Bz,g.ez,h.u5,h.UX,on,Ot.q,ft,w.mZ,z.Cl,r.PYG,r.T2N,r.zyh,r.HKp,r.KdK,r.nKr,r.V7y,r.BW0,r.IIj,r.uuI,r.urD,r.rgH,r.LW9.forRoot()]}),n})()}}]);